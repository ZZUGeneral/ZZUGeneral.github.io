<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>反射 - General 的个人博客</title><meta name="description" content="  反射类提供了一个非常丰富且精心设计的工具集，以便编写能够动态操纵 Java 代码的程序。这项功能被大量地应用于 JavaBean 中，它是 Java 组建的体系结构。   能够分析类的程序称为反射。反射的功能及其强大，可以用来： 在运行时分析类的能力 在运行时查看对象。例如，编写一个 toString 方法供所有类使用 实现通用的数组操作代码 利用 Method 对象"/><meta property="og:description" content="  反射类提供了一个非常丰富且精心设计的工具集，以便编写能够动态操纵 Java 代码的程序。这项功能被大量地应用于 JavaBean 中，它是 Java 组建的体系结构。   能够分析类的程序称为反射。反射的功能及其强大，可以用来： 在运行时分析类的能力 在运行时查看对象。例如，编写一个 toString 方法供所有类使用 实现通用的数组操作代码 利用 Method 对象"/>    <meta name="keywords" content="Solo,Java, 安全,测试博客,开源,Linux,CentOS,Ubuntu,Docker,Spring Boot,Swagger,SQLMAP,Web渗透"/><link rel="dns-prefetch" href="https://ZZUGeneral.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://ZZUGeneral.github.io"><link rel="icon" type="image/png" href="https://static.b3log.org/images/brand/solo-128.png"/><link rel="apple-touch-icon" href="https://static.b3log.org/images/brand/solo-128.png"><link rel="shortcut icon" type="image/x-icon" href="https://static.b3log.org/images/brand/solo-128.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="反射 - General 的个人博客"/><meta property="og:site_name" content="General 的个人博客"/><meta property="og:url"      content="https://ZZUGeneral.github.io/articles/2020/10/17/1602938025485.html?"/><meta property="og:image" content="https://static.b3log.org/images/brand/solo-128.png"/><link rel="search" type="application/opensearchdescription+xml" title="反射 - General 的个人博客" href="/opensearch.xml"><link href="https://ZZUGeneral.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://ZZUGeneral.github.io/manifest.json">        <link rel="canonical" href="https://ZZUGeneral.github.io/articles/2020/10/17/1602938025485.html">        <link rel="stylesheet"
              href="https://ZZUGeneral.github.io/skins/Bubble/css/base.css?1602754508835"/>
            <link rel="prev" title="核心防御机制" href="https://ZZUGeneral.github.io/articles/2020/10/14/1602667334063.html">
            <link rel="next" title="继承的设计技巧" href="https://ZZUGeneral.github.io/articles/2020/10/17/1602938103120.html">
    <script src="https://cdn.jsdelivr.net/npm/vditor@3.5.3/dist/js/icons/ant.js" async="" id="vditorIconScript"></script></head>
<body class="fn__flex-column">
<div id="pjax" class="fn__flex-1">
    
    <progress class="fn__progress"></progress>
    <header class="header header--article">
        <div class="wrapper header__title">
            <h1 class="header__h1 fn__flex-inline">
                <a href="https://ZZUGeneral.github.io" rel="start">General 的个人博客</a>
            </h1>
            <h2 class="header__desc header__desc--title">你一定会喜欢那个因为喜欢她而发光的自己！</h2>
            <div class="header__desc">
                <h2>人间忽晚，山河已秋。</h2>
<!-- 公告栏可使用 HTML、JavaScript，比如可以在此加入第三方统计 js -->
            </div>
            <svg class="header__down" id="headerDown" viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M15.992 25.304c-0 0-0 0-0.001 0-0.516 0-0.981-0.216-1.31-0.563l-0.001-0.001-14.187-14.996c-0.306-0.323-0.494-0.76-0.494-1.241 0-0.998 0.809-1.807 1.807-1.807 0.517 0 0.983 0.217 1.313 0.565l0.001 0.001 12.875 13.612 12.886-13.612c0.331-0.348 0.797-0.565 1.314-0.565 0.481 0 0.918 0.187 1.242 0.493l-0.001-0.001c0.723 0.687 0.755 1.832 0.072 2.555l-14.201 14.996c-0.33 0.348-0.795 0.564-1.311 0.564-0.001 0-0.003 0-0.004 0h0z"></path>
            </svg>
        </div>
    </header>
    <div class="side__menu">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M30 18h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM30 6.25h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM2 25.75h28c1.1 0 2 0.9 2 2s-0.9 2-2 2h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2z"></path>
        </svg>
        <span>
            &nbsp; menu
        </span>
    </div>
    <div class="side__main">
        <div class="side__bg"></div>
        <div class="side__panel">
            <svg class="side__close ft__a" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                 viewBox="0 0 20 20">
                <path d="M18.362 19.324c-0.902 0.902-2.363 0.902-3.263 0l-5.098-5.827-5.098 5.825c-0.902 0.902-2.363 0.902-3.263 0-0.902-0.902-0.902-2.363 0-3.263l5.304-6.057-5.306-6.061c-0.902-0.902-0.902-2.361 0-3.263s2.361-0.902 3.263 0l5.1 5.829 5.098-5.829c0.902-0.902 2.361-0.902 3.263 0s0.902 2.363 0 3.263l-5.304 6.061 5.304 6.057c0.902 0.902 0.902 2.363 0 3.265z"></path>
            </svg>

            <div class="side__header">
                <a href="https://ZZUGeneral.github.io" rel="start"><img class="side__logo" alt="General 的个人博客" src="https://b3logfile.com/avatar/1596873896447_1600698145202.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"></a>

                <div class="side__meta">
                    33 文章 <br>
                    <span data-uvstaturl="https://ZZUGeneral.github.io">0</span> 浏览
                    
                </div>
            </div>

            <div class="side__title">
                <span>ღゝ◡╹)ノ❤️</span>
            </div>
            <ul class="side__nav">
                <li>
                    <a href="https://ZZUGeneral.github.io" rel="start">
                            General 的个人博客
                    </a>
                </li>
                    <li>
                        <a href="/my-github-repos" target="_self"><img
                                class="page-icon" src="/images/github-icon.png" alt="我的开源">我的开源</a>
                    </li>
                <li>
                    <a href="https://ZZUGeneral.github.io/categories.html">分类</a>
                </li>
                <li>
                    <a href="https://ZZUGeneral.github.io/tags.html">标签墙</a>
                </li>
                <li>
                    <a href="https://ZZUGeneral.github.io/archives.html">存档</a>
                </li>
                <li>
                    <a href="https://ZZUGeneral.github.io/links.html">友链</a>
                </li>
                <li>
                    <a rel="alternate" href="https://ZZUGeneral.github.io/rss.xml">RSS</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="article__top" style="background-image: url(https://b3logfile.com/bing/20190419.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100)">
        <div style="background-image: url(https://b3logfile.com/bing/20190419.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100)"></div>
        <canvas id="articleTop"></canvas>
    </div>
    <div class="article">
        <div class="ft__center">
            <div class="article__meta">
                <time>
                    2020-10-17
                </time>
                /
                    <a rel="tag"
                       href="https://ZZUGeneral.github.io/tags/JAVA">JAVA</a> &nbsp;
            </div>
            <h2 class="article__title">
                反射
            </h2>
<div class="article__share"
     data-title="反射"
     data-blogtitle="General 的个人博客"
     data-url="https://ZZUGeneral.github.io/articles/2020/10/17/1602938025485.html"
     data-avatar="https://b3logfile.com/avatar/1596873896447_1600698145202.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100">
    <span class="item" data-type="qqz">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M22.824 13.989l-8.348 6.287s3.351 0.522 8.404 0.461l-0.23-1.040 7.2-6.549c0.132-0.12 0.183-0.312 0.129-0.487s-0.203-0.299-0.377-0.314l-9.492-0.856-3.708-9.213c-0.068-0.169-0.226-0.279-0.401-0.279s-0.333 0.11-0.401 0.279l-3.708 9.213-9.492 0.856c-0.174 0.015-0.323 0.139-0.377 0.314s-0.004 0.366 0.129 0.487l7.2 6.549-2.158 9.742c-0.040 0.178 0.026 0.365 0.168 0.474 0.142 0.107 0.331 0.115 0.481 0.021l8.158-5.165 8.158 5.165c0.070 0.045 0.147 0.066 0.225 0.066 0.090 0 0.18-0.029 0.256-0.086 0.142-0.109 0.208-0.295 0.168-0.474l-1.707-7.704c0.732-0.386 1.538-1.040 1.538-1.040s-3.195 1.638-14.664 0.838l8.312-6.325s-0.327-0.534-10.744-0.914c-0.697-0.026 8.493-1.83 15.281-0.305z"></path>
        </svg>
    </span>
    <span class="item" data-type="wechat">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
        </svg>
    </span>
    <span class="item" data-type="weibo">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
            <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
            <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
            <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
        </svg>
    </span>
    <span class="item" data-type="twitter">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32.003 6.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
        </svg>
    </span>
    <span class="item__qr"></span>
</div>        </div>
        <div class="wrapper">
            <section class="vditor-reset articles article__content">
                <p>  反射类提供了一个非常丰富且精心设计的工具集，以便编写能够动态操纵 Java 代码的程序。这项功能被大量地应用于 JavaBean 中，它是 Java 组建的体系结构。</p>
<p>  能够分析类的程序称为反射。反射的功能及其强大，可以用来：</p>
<ul>
<li>在运行时分析类的能力</li>
<li>在运行时查看对象。例如，编写一个 toString 方法供所有类使用</li>
<li>实现通用的数组操作代码</li>
<li>利用 Method 对象</li>
</ul>
<h2 id="Class类">Class 类</h2>
<p>  在程序运行期间，Java 运行时系统始终为所有的对象维护一个被称为运行时的类型标识。这个信息跟踪着每个对象所属的类。虚拟机利用这些运行时类型信息选择相应的方法执行。</p>
<p>  然而，可以通过专门的 Java 类访问这些信息。保存这些信息的类别称为 Class，Object 类中的 getClass() 方法将会返回一个 Class 类型的实例。</p>
<pre><code class="highlight-chroma">Employee e;
...
Class cl = e.getClass();
</code></pre>
<p>  如同用一个 Employee 对象表示一个特定的雇员属性一样，一个 Class 对象将表示一个特性类的属性。最常用的 Class 方法是 getName()，返回类的名字。</p>
<pre><code class="highlight-chroma">System.out.println(e.getClass().getName() + " " + e.getName());
</code></pre>
<pre><code class="highlight-chroma">e是一个经理，结果为： Manager Tom
e是一个雇员，结果为： Employee Tom
</code></pre>
<p>  如果类在一个包中，包的名字也会作为类名的一部分。</p>
<p>  还可以调用静态方法 forName() 获得类名对应的 Class 对象。</p>
<pre><code class="highlight-chroma">String className = "java.util.Random";
Class cl = Class.forName(className);
</code></pre>
<p>  如果类名保存在字符串中，并可在运行中改变，就可以用这个方法。这个方法只能在 className 是类名或者接口名时才能够执行。否侧， forName() 方法会抛出一个 checked exception。无论何时使用这个方法，都应该提供一个异常处理器。</p>
<p>  获得 Class 对象的第三种方法非常简单。如果 T 是任意的 Java 类型 （或者 void 关键字）， T.class 将代表匹配的类对象。</p>
<pre><code class="highlight-chroma">Class cl1 = Random.Class; // 如果你没有 import java.util.*
Class cl2 = int.class;
Class Cl3 = Double[].class;
</code></pre>
<p>  Tips ： 一个 Class 对象实际上表示的是一个类型，而这个类型未必是一定是一种类。例如， int 不是类，但是 int.class 是一个 Class 类型的对象。</p>
<p>  Class 类实际上是一个泛型类。Employee.class 的类型是 Class<employee>。Class 将已经抽象的概念更加复杂化了。在大多是实际问题中，可以忽略参数类型，而使用原始的 Class 类。</employee></p>
<p>  鉴于历史原因，getName 方法应用于数组类型的人时候会翻译一个很奇怪的名字：</p>
<ul>
<li>Double[].class.getName() 返回 “[Ljava.lang.Double;”</li>
<li>int[].class.getName() 返回 “[I”</li>
</ul>
<p>  虚拟机为每个类型管理一个 Class 对象。因此，可以利用 == 运算符实现两个类对象比较的操作。</p>
<p>  newInstance 方法调用默认的构造器（无参构造器）初始化新创建的对象。如果没有默认的构造器，就会抛出异常。将 forName 与 newInstance 配合使用，可以根据储存在字符串中的类型创建一个对象。</p>
<pre><code class="highlight-chroma">String s = "java.util.Random";
Object a = Class.forName(s).newInstance();
</code></pre>
<h2 id="利用反射分析类的能力">利用反射分析类的能力</h2>
<p>  反射机制中最重要的内容---检查类的结构。</p>
<p>  在 java.lang.reflect 包中有三个类 Field, Method 和 Constructor 分别用于描述类的域，方法和构造器。这三个类都有一个 getName 方法，用来返回项目的名称。</p>
<p>  Field 有一个 getType 方法，用力返回描述域所述类型的 Class 对象。Method 和 Constructor 类能够报告参数类型的方法，Method 类还有一个可以报告返回类型的方法。这三个类还有一个 getModifiers 的方法，它将返回一个整形数值，用不同的为开关描述 public 和 static 这样的修饰符。还可以利用 java.lang.reflect 包中的 Modifier 类的静态方法分析 getModifiers 返回的整形数值。</p>
<p>  下面的类打印一个类的所有信息。用户输入类型，然后输出类中的所有方法和构造器签名，以及全部的域名。</p>
<pre><code class="highlight-chroma">请输入类名(eg : java.util.Date) : 
java.lang.Double
java.lang.Double类的所有信息如下 : 
public final class java.lang.Double extend java.lang.Number
{
  public java.lang.Double(double);
  public java.lang.Double(java.lang.String);

  public boolean equals(java.lang.Object)
  public static java.lang.String toString(double)
  public java.lang.String toString()
  public int hashCode()
  public static int hashCode(double)
  public static double min(double, double)
  public static double max(double, double)
  public static native long doubleToRawLongBits(double)
  public static long doubleToLongBits(double)
  public static native double longBitsToDouble(long)
  public volatile int compareTo(java.lang.Object)
  public int compareTo(java.lang.Double)
  public byte byteValue()
  public short shortValue()
  public int intValue()
  public long longValue()
  public float floatValue()
  public double doubleValue()
  public static java.lang.Double valueOf(java.lang.String)
  public static java.lang.Double valueOf(double)
  public static java.lang.String toHexString(double)
  public static int compare(double, double)
  public static boolean isNaN(double)
  public boolean isNaN()
  public static boolean isFinite(double)
  public static boolean isInfinite(double)
  public boolean isInfinite()
  public static double sum(double, double)
  public static double parseDouble(java.lang.String)
  public final void wait()
  public final void wait(long, int)
  public final native void wait(long)
  public final native java.lang.Class getClass()
  public final native void notify()
  public final native void notifyAll()

  public static final double POSITIVE_INFINITY;
  public static final double NEGATIVE_INFINITY;
  public static final double NaN;
  public static final double MAX_VALUE;
  public static final double MIN_NORMAL;
  public static final double MIN_VALUE;
  public static final int MAX_EXPONENT;
  public static final int MIN_EXPONENT;
  public static final int SIZE;
  public static final int BYTES;
  public static final java.lang.Class TYPE;
}
</code></pre>
<p>  这个程序可以分析 Java 解释器能够加载的任何类，而不仅仅是编译程序是可以使用的类。该程序代码如下：</p>
<pre><code class="language-go highlight-chroma"><span class="highlight-kn">package</span> <span class="highlight-nx">com</span><span class="highlight-p">.</span><span class="highlight-nx">yhl</span><span class="highlight-p">.</span><span class="highlight-nx">book</span><span class="highlight-p">.</span><span class="highlight-nx">test</span><span class="highlight-p">;</span>

<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Constructor</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Field</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Method</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Modifier</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">util</span><span class="highlight-p">.</span><span class="highlight-nx">Scanner</span><span class="highlight-p">;</span>

<span class="highlight-cm">/**
</span><span class="highlight-cm"> * @PROJECT_NAME: DataStructures
</span><span class="highlight-cm"> * @ClassName ReflectionTest
</span><span class="highlight-cm"> * @Author YHL
</span><span class="highlight-cm"> * @Email 1359541394@qq.com
</span><span class="highlight-cm"> * @Date 2020/10/15 21:35
</span><span class="highlight-cm"> * @Version 1.0
</span><span class="highlight-cm"> * @Description TODO
</span><span class="highlight-cm"> */</span>
<span class="highlight-nx">public</span> <span class="highlight-nx">class</span> <span class="highlight-nx">ReflectionTest</span> <span class="highlight-p">{</span>
 &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">main</span><span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[]</span> <span class="highlight-nx">args</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 读取命令参数args 或者用户输入的类名
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">name</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">args</span><span class="highlight-p">.</span><span class="highlight-nx">length</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">name</span> <span class="highlight-p">=</span> <span class="highlight-nx">args</span><span class="highlight-p">[</span><span class="highlight-mi">0</span><span class="highlight-p">];</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">else</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Scanner</span> <span class="highlight-nx">scan</span> <span class="highlight-p">=</span> <span class="highlight-nx">new</span> <span class="highlight-nf">Scanner</span><span class="highlight-p">(</span><span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">in</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-s">"请输入类名(eg : java.util.Date) : "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">name</span> <span class="highlight-p">=</span> <span class="highlight-nx">scan</span><span class="highlight-p">.</span><span class="highlight-nf">next</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-nx">name</span> <span class="highlight-o">+</span> <span class="highlight-s">"类的所有信息如下 : "</span><span class="highlight-p">);</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">try</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">//打印类名和超类 (if != Object )
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span> <span class="highlight-p">=</span> <span class="highlight-nx">Class</span><span class="highlight-p">.</span><span class="highlight-nf">forName</span><span class="highlight-p">(</span><span class="highlight-nx">name</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">supercl</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getSuperclass</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">modifiers</span> <span class="highlight-p">=</span> <span class="highlight-nx">Modifier</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getModifiers</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">modifiers</span><span class="highlight-p">.</span><span class="highlight-nf">length</span><span class="highlight-p">()</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">modifiers</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"class "</span> <span class="highlight-o">+</span> <span class="highlight-nx">name</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">supercl</span> <span class="highlight-o">!=</span> <span class="highlight-nx">null</span> <span class="highlight-o">&amp;&amp;</span> <span class="highlight-nx">supercl</span> <span class="highlight-o">!=</span> <span class="highlight-nx">Object</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">" extend "</span> <span class="highlight-o">+</span> <span class="highlight-nx">supercl</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"\n{\n"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nf">printConstructors</span><span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nf">printMethods</span><span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nf">printFields</span><span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"}"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span> <span class="highlight-nf">catch</span> <span class="highlight-p">(</span><span class="highlight-nx">ClassNotFoundException</span> <span class="highlight-nx">e</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">e</span><span class="highlight-p">.</span><span class="highlight-nf">printStackTrace</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nf">exit</span><span class="highlight-p">(</span><span class="highlight-mi">0</span><span class="highlight-p">);</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">//打印该类所有的构造器
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">printConstructors</span><span class="highlight-p">(</span><span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Constructor</span><span class="highlight-p">[]</span> <span class="highlight-nx">constructors</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getConstructors</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-nx">Constructor</span> <span class="highlight-nx">c</span> <span class="highlight-p">:</span> <span class="highlight-nx">constructors</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">name</span> <span class="highlight-p">=</span> <span class="highlight-nx">c</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 打印修饰符和构造器名
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"  "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">modifiers</span> <span class="highlight-p">=</span> <span class="highlight-nx">Modifier</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">c</span><span class="highlight-p">.</span><span class="highlight-nf">getModifiers</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">modifiers</span><span class="highlight-p">.</span><span class="highlight-nf">length</span><span class="highlight-p">()</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">modifiers</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">name</span> <span class="highlight-o">+</span> <span class="highlight-s">"("</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 打印参数类型
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span><span class="highlight-p">[]</span> <span class="highlight-nx">paramTypes</span> <span class="highlight-p">=</span> <span class="highlight-nx">c</span><span class="highlight-p">.</span><span class="highlight-nf">getParameterTypes</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-kt">int</span> <span class="highlight-nx">i</span> <span class="highlight-p">=</span> <span class="highlight-mi">0</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span> <span class="highlight-p">&lt;</span> <span class="highlight-nx">paramTypes</span><span class="highlight-p">.</span><span class="highlight-nx">length</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span><span class="highlight-o">++</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">i</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">", "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">paramTypes</span><span class="highlight-p">[</span><span class="highlight-nx">i</span><span class="highlight-p">].</span><span class="highlight-nf">getName</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-s">");"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">//打印该类的所有方法
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">printMethods</span><span class="highlight-p">(</span><span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Method</span><span class="highlight-p">[]</span> <span class="highlight-nx">methods</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getMethods</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-nx">Method</span> <span class="highlight-nx">m</span> <span class="highlight-p">:</span> <span class="highlight-nx">methods</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">retType</span> <span class="highlight-p">=</span> <span class="highlight-nx">m</span><span class="highlight-p">.</span><span class="highlight-nf">getReturnType</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">name</span> <span class="highlight-p">=</span> <span class="highlight-nx">m</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 打印修饰符，返回值类型和方法名
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"  "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">modifiers</span> <span class="highlight-p">=</span> <span class="highlight-nx">Modifier</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">m</span><span class="highlight-p">.</span><span class="highlight-nf">getModifiers</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">modifiers</span><span class="highlight-p">.</span><span class="highlight-nf">length</span><span class="highlight-p">()</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">modifiers</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">retType</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">()</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span> <span class="highlight-o">+</span> <span class="highlight-nx">name</span> <span class="highlight-o">+</span> <span class="highlight-s">"("</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 打印参数类型
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span><span class="highlight-p">[]</span> <span class="highlight-nx">paramTypes</span> <span class="highlight-p">=</span> <span class="highlight-nx">m</span><span class="highlight-p">.</span><span class="highlight-nf">getParameterTypes</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-kt">int</span> <span class="highlight-nx">i</span> <span class="highlight-p">=</span> <span class="highlight-mi">0</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span> <span class="highlight-p">&lt;</span> <span class="highlight-nx">paramTypes</span><span class="highlight-p">.</span><span class="highlight-nx">length</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span><span class="highlight-o">++</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">i</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">", "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">paramTypes</span><span class="highlight-p">[</span><span class="highlight-nx">i</span><span class="highlight-p">].</span><span class="highlight-nf">getName</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-s">")"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">// 打印域
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">printFields</span><span class="highlight-p">(</span><span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Field</span><span class="highlight-p">[]</span> <span class="highlight-nx">fields</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getFields</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-nx">Field</span> <span class="highlight-nx">f</span> <span class="highlight-p">:</span> <span class="highlight-nx">fields</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-kd">type</span> <span class="highlight-p">=</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getType</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">name</span> <span class="highlight-p">=</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-s">"  "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">modifiers</span> <span class="highlight-p">=</span> <span class="highlight-nx">Modifier</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getModifiers</span><span class="highlight-p">());</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">modifiers</span><span class="highlight-p">.</span><span class="highlight-nf">length</span><span class="highlight-p">()</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">modifiers</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-kd">type</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">()</span> <span class="highlight-o">+</span> <span class="highlight-s">" "</span> <span class="highlight-o">+</span> <span class="highlight-nx">name</span> <span class="highlight-o">+</span> <span class="highlight-s">";"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp;  <span class="highlight-p">}</span>
<span class="highlight-p">}</span>
</code></pre>
<h2 id="在运行时使用反射分析对象">在运行时使用反射分析对象</h2>
<p>  反射机制的默认行为受限于 Java 的访问控制。然而，如果一个 Java 程序·没有收到安全管理器的控制，就可以覆盖访问控制。为了达到这个目的，可以调用 Field, Method 或 Constructor 对象的 setAccessible 方法。</p>
<p>  setAccessible 方法是 AccessibleObject 类的一个方法，它是 Method、Field 和 Constructor 类的公共超类。这个特性是为了调试，持久存储和相似机制提供的。</p>
<p>  下列代码编写一个可供任意类提供 toString 方法，使用 getDeclaredFields 获取所有的数据域，使用 setAccessible 将所有的域设置为可访问的。对于每个域，获得了名字和值。</p>
<p>  循环应用可能会导致无限递归，所示 ObjectAnalyzer 将记录已经被访问过的对象。为了查看数组内部，需要采用一种不同的方式，具体看代码。</p>
<pre><code class="language-go highlight-chroma"><span class="highlight-kn">package</span> <span class="highlight-nx">book</span><span class="highlight-p">.</span><span class="highlight-nx">test</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">objectAnalyzer</span><span class="highlight-p">;</span>

<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">AccessibleObject</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Array</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Field</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Modifier</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">util</span><span class="highlight-p">.</span><span class="highlight-nx">ArrayList</span><span class="highlight-p">;</span>

<span class="highlight-cm">/**
</span><span class="highlight-cm"> * @PROJECT_NAME: DataStructures
</span><span class="highlight-cm"> * @ClassName ObjectAnalyzer
</span><span class="highlight-cm"> * @Author YHL
</span><span class="highlight-cm"> * @Email 1359541394@qq.com
</span><span class="highlight-cm"> * @Date 2020/10/16 22:01
</span><span class="highlight-cm"> * @Version 1.0
</span><span class="highlight-cm"> * @Description TODO
</span><span class="highlight-cm"> */</span>
<span class="highlight-nx">public</span> <span class="highlight-nx">class</span> <span class="highlight-nx">ObjectAnalyzer</span> <span class="highlight-p">{</span>
 &nbsp;  <span class="highlight-nx">private</span> <span class="highlight-nx">ArrayList</span><span class="highlight-p">&lt;</span><span class="highlight-nx">Object</span><span class="highlight-p">&gt;</span> <span class="highlight-nx">visited</span> <span class="highlight-p">=</span> <span class="highlight-nx">new</span> <span class="highlight-nx">ArrayList</span><span class="highlight-p">&lt;&gt;();</span>

 &nbsp;  <span class="highlight-c1">// 可以使用该方法查看任意对象内部信息
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">String</span> <span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">Object</span> <span class="highlight-nx">object</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">object</span> <span class="highlight-o">==</span> <span class="highlight-nx">null</span><span class="highlight-p">)</span> <span class="highlight-k">return</span> <span class="highlight-s">"null"</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">visited</span><span class="highlight-p">.</span><span class="highlight-nf">contains</span><span class="highlight-p">(</span><span class="highlight-nx">object</span><span class="highlight-p">))</span> <span class="highlight-k">return</span> <span class="highlight-s">"..."</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">visited</span><span class="highlight-p">.</span><span class="highlight-nf">add</span><span class="highlight-p">(</span><span class="highlight-nx">object</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span> <span class="highlight-p">=</span> <span class="highlight-nx">object</span><span class="highlight-p">.</span><span class="highlight-nf">getClass</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">cl</span> <span class="highlight-o">==</span> <span class="highlight-nx">String</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">)</span> <span class="highlight-k">return</span> <span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">)</span> <span class="highlight-nx">object</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">isArray</span><span class="highlight-p">())</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">r</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getComponentType</span><span class="highlight-p">()</span> <span class="highlight-o">+</span> <span class="highlight-s">"[]{"</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-kt">int</span> <span class="highlight-nx">i</span> <span class="highlight-p">=</span> <span class="highlight-mi">0</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span> <span class="highlight-p">&lt;</span> <span class="highlight-nx">Array</span><span class="highlight-p">.</span><span class="highlight-nf">getLength</span><span class="highlight-p">(</span><span class="highlight-nx">object</span><span class="highlight-p">);</span> <span class="highlight-nx">i</span><span class="highlight-o">++</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">i</span> <span class="highlight-p">&gt;</span> <span class="highlight-mi">0</span><span class="highlight-p">)</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-s">","</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Object</span> <span class="highlight-nx">val</span> <span class="highlight-p">=</span> <span class="highlight-nx">Array</span><span class="highlight-p">.</span><span class="highlight-nf">get</span><span class="highlight-p">(</span><span class="highlight-nx">object</span><span class="highlight-p">,</span> <span class="highlight-nx">i</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getComponentType</span><span class="highlight-p">().</span><span class="highlight-nf">isPrimitive</span><span class="highlight-p">())</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-nx">val</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">else</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">val</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">return</span> <span class="highlight-nx">r</span> <span class="highlight-o">+</span> <span class="highlight-s">"}"</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span> <span class="highlight-nx">r</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">do</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-s">"["</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Field</span><span class="highlight-p">[]</span> <span class="highlight-nx">fields</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getDeclaredFields</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">AccessibleObject</span><span class="highlight-p">.</span><span class="highlight-nf">setAccessible</span><span class="highlight-p">(</span><span class="highlight-nx">fields</span><span class="highlight-p">,</span> <span class="highlight-kc">true</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-nx">Field</span> <span class="highlight-nx">f</span> <span class="highlight-p">:</span> <span class="highlight-nx">fields</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(!</span><span class="highlight-nx">Modifier</span><span class="highlight-p">.</span><span class="highlight-nf">isStatic</span><span class="highlight-p">(</span><span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getModifiers</span><span class="highlight-p">()))</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(!</span><span class="highlight-nx">r</span><span class="highlight-p">.</span><span class="highlight-nf">endsWith</span><span class="highlight-p">(</span><span class="highlight-s">"["</span><span class="highlight-p">))</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-s">","</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getName</span><span class="highlight-p">()</span> <span class="highlight-o">+</span> <span class="highlight-s">"="</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">try</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">t</span> <span class="highlight-p">=</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">getType</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Object</span> <span class="highlight-nx">val</span> <span class="highlight-p">=</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">get</span><span class="highlight-p">(</span><span class="highlight-nx">object</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(</span><span class="highlight-nx">t</span><span class="highlight-p">.</span><span class="highlight-nf">isPrimitive</span><span class="highlight-p">())</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-nx">val</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-k">else</span> <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">val</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span> <span class="highlight-nf">catch</span> <span class="highlight-p">(</span><span class="highlight-nx">Exception</span> <span class="highlight-nx">e</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">e</span><span class="highlight-p">.</span><span class="highlight-nf">printStackTrace</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">r</span> <span class="highlight-o">+=</span> <span class="highlight-s">"]"</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">cl</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getSuperclass</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span> <span class="highlight-nf">while</span> <span class="highlight-p">(</span><span class="highlight-nx">cl</span> <span class="highlight-o">!=</span> <span class="highlight-nx">null</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">return</span> <span class="highlight-nx">r</span><span class="highlight-p">;</span>
 &nbsp;  <span class="highlight-p">}</span>
<span class="highlight-p">}</span>
</code></pre>
<p>  测试代码</p>
<pre><code class="language-go highlight-chroma"><span class="highlight-kn">package</span> <span class="highlight-nx">book</span><span class="highlight-p">.</span><span class="highlight-nx">test</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">objectAnalyzer</span><span class="highlight-p">;</span>

<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">util</span><span class="highlight-p">.</span><span class="highlight-nx">ArrayList</span><span class="highlight-p">;</span>

<span class="highlight-cm">/**
</span><span class="highlight-cm"> * @PROJECT_NAME: DataStructures
</span><span class="highlight-cm"> * @ClassName ObjectAnalyzerTest
</span><span class="highlight-cm"> * @Author YHL
</span><span class="highlight-cm"> * @Email 1359541394@qq.com
</span><span class="highlight-cm"> * @Date 2020/10/16 21:55
</span><span class="highlight-cm"> * @Version 1.0
</span><span class="highlight-cm"> * @Description TODO
</span><span class="highlight-cm"> */</span>
<span class="highlight-nx">public</span> <span class="highlight-nx">class</span> <span class="highlight-nx">ObjectAnalyzerTest</span> <span class="highlight-p">{</span>
 &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">main</span><span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[]</span> <span class="highlight-nx">args</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">ArrayList</span><span class="highlight-p">&lt;</span><span class="highlight-nx">Integer</span><span class="highlight-p">&gt;</span> <span class="highlight-nx">sequares</span> <span class="highlight-p">=</span> <span class="highlight-nx">new</span> <span class="highlight-nx">ArrayList</span><span class="highlight-p">&lt;&gt;();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-kt">int</span> <span class="highlight-nx">i</span> <span class="highlight-p">=</span> <span class="highlight-mi">1</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span> <span class="highlight-o">&lt;=</span> <span class="highlight-mi">5</span><span class="highlight-p">;</span> <span class="highlight-nx">i</span><span class="highlight-o">++</span><span class="highlight-p">)</span> <span class="highlight-nx">sequares</span><span class="highlight-p">.</span><span class="highlight-nf">add</span><span class="highlight-p">(</span><span class="highlight-nx">i</span> <span class="highlight-o">*</span> <span class="highlight-nx">i</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">print</span><span class="highlight-p">(</span><span class="highlight-nx">new</span> <span class="highlight-nf">ObjectAnalyzer</span><span class="highlight-p">().</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">sequares</span><span class="highlight-p">));</span>
 &nbsp;  <span class="highlight-p">}</span>
<span class="highlight-p">}</span>
</code></pre>
<p>  运行结果</p>
<pre><code class="highlight-chroma">java.util.ArrayList[elementData=class java.lang.Object[]{java.lang.Integer[value=1][][],java.lang.Integer[value=4][][],java.lang.Integer[value=9][][],java.lang.Integer[value=16][][],java.lang.Integer[value=25][][],null,null,null,null,null},size=5][modCount=5][][]
</code></pre>
<h2 id="使用反射编写泛型数组代码">使用反射编写泛型数组代码</h2>
<p>  java.lang.reflect 包中的 Array 类允许动态创建数组，可以将这个特性应用到 Array 类的 copyOf() 方法中。其中最关键的是 Array 类的静态方法 newInstance，它能构建新数组。需要两个参数，一个是数组元素类型，一个是数组的长度。</p>
<p>  可以通过调用 Array.getLength(a) 获得数组的长度，也可以通过 Array 的静态 getLength 方法的返回值得到任意数组的长度。而获得新数组元素类型，需要进行一下工作：</p>
<ol>
<li>首先获得 a 数组的类对象</li>
<li>确认它是一个数组</li>
<li>使用 Class 类（只能定义表示数组的类对象）的 getComponentType() 方法确定数组对应的类型。</li>
</ol>
<pre><code class="language-go highlight-chroma"><span class="highlight-kn">package</span> <span class="highlight-nx">book</span><span class="highlight-p">.</span><span class="highlight-nx">test</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">arrays</span><span class="highlight-p">;</span>

<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Array</span><span class="highlight-p">;</span>
<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">util</span><span class="highlight-p">.</span><span class="highlight-nx">Arrays</span><span class="highlight-p">;</span>

<span class="highlight-cm">/**
</span><span class="highlight-cm"> * @PROJECT_NAME: DataStructures
</span><span class="highlight-cm"> * @ClassName CopyOfTest
</span><span class="highlight-cm"> * @Author YHL
</span><span class="highlight-cm"> * @Email 1359541394@qq.com
</span><span class="highlight-cm"> * @Date 2020/10/17 10:58
</span><span class="highlight-cm"> * @Version 1.0
</span><span class="highlight-cm"> * @Description TODO
</span><span class="highlight-cm"> */</span>
<span class="highlight-nx">public</span> <span class="highlight-nx">class</span> <span class="highlight-nx">CopyOfTest</span> <span class="highlight-p">{</span>
 &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">main</span><span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[]</span> <span class="highlight-nx">args</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-kt">int</span><span class="highlight-p">[]</span> <span class="highlight-nx">a</span> <span class="highlight-p">=</span> <span class="highlight-p">{</span><span class="highlight-mi">1</span><span class="highlight-p">,</span> <span class="highlight-mi">2</span><span class="highlight-p">,</span> <span class="highlight-mi">3</span><span class="highlight-p">,</span> <span class="highlight-mi">4</span><span class="highlight-p">,</span> <span class="highlight-mi">5</span><span class="highlight-p">};</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">a</span> <span class="highlight-p">=</span> <span class="highlight-p">(</span><span class="highlight-kt">int</span><span class="highlight-p">[])</span> <span class="highlight-nf">goodCopyOf</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-nx">Arrays</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">));</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">String</span><span class="highlight-p">[]</span> <span class="highlight-nx">b</span> <span class="highlight-p">=</span> <span class="highlight-p">{</span><span class="highlight-s">"Tom"</span><span class="highlight-p">,</span> <span class="highlight-s">"Jack"</span><span class="highlight-p">,</span> <span class="highlight-s">"Harry"</span><span class="highlight-p">};</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">b</span> <span class="highlight-p">=</span> <span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[])</span> <span class="highlight-nf">goodCopyOf</span><span class="highlight-p">(</span><span class="highlight-nx">b</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-nx">Arrays</span><span class="highlight-p">.</span><span class="highlight-nf">toString</span><span class="highlight-p">(</span><span class="highlight-nx">b</span><span class="highlight-p">));</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-s">"The Following Call Will Generate an Exception:"</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">b</span> <span class="highlight-p">=</span> <span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[])</span> <span class="highlight-nf">badCopyOf</span><span class="highlight-p">(</span><span class="highlight-nx">b</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">);</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">// 返回对象是对象数组，不能转换为具体的类型
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">Object</span><span class="highlight-p">[]</span> <span class="highlight-nf">badCopyOf</span><span class="highlight-p">(</span><span class="highlight-nx">Object</span><span class="highlight-p">[]</span> <span class="highlight-nx">a</span><span class="highlight-p">,</span> <span class="highlight-kt">int</span> <span class="highlight-nx">newLength</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Object</span><span class="highlight-p">[]</span> <span class="highlight-nx">newArray</span> <span class="highlight-p">=</span> <span class="highlight-nx">new</span> <span class="highlight-nx">Object</span><span class="highlight-p">[</span><span class="highlight-nx">newLength</span><span class="highlight-p">];</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nf">arraycopy</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">,</span> <span class="highlight-mi">0</span><span class="highlight-p">,</span> <span class="highlight-nx">newArray</span><span class="highlight-p">,</span> <span class="highlight-mi">0</span><span class="highlight-p">,</span> <span class="highlight-nx">Math</span><span class="highlight-p">.</span><span class="highlight-nf">min</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">.</span><span class="highlight-nx">length</span><span class="highlight-p">,</span> <span class="highlight-nx">newLength</span><span class="highlight-p">));</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">return</span> <span class="highlight-nx">newArray</span><span class="highlight-p">;</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">// 整数类型数组 int[] 可以被转换成Object ，但是不能转换为对象数组。
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">Object</span> <span class="highlight-nf">goodCopyOf</span><span class="highlight-p">(</span><span class="highlight-nx">Object</span> <span class="highlight-nx">a</span><span class="highlight-p">,</span> <span class="highlight-kt">int</span> <span class="highlight-nx">newLength</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">cl</span> <span class="highlight-p">=</span> <span class="highlight-nx">a</span><span class="highlight-p">.</span><span class="highlight-nf">getClass</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">if</span> <span class="highlight-p">(!</span><span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">isArray</span><span class="highlight-p">())</span> <span class="highlight-k">return</span> <span class="highlight-nx">null</span><span class="highlight-p">;</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Class</span> <span class="highlight-nx">componentType</span> <span class="highlight-p">=</span> <span class="highlight-nx">cl</span><span class="highlight-p">.</span><span class="highlight-nf">getComponentType</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-kt">int</span> <span class="highlight-nx">length</span> <span class="highlight-p">=</span> <span class="highlight-nx">Array</span><span class="highlight-p">.</span><span class="highlight-nf">getLength</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Object</span> <span class="highlight-nx">newArray</span> <span class="highlight-p">=</span> <span class="highlight-nx">Array</span><span class="highlight-p">.</span><span class="highlight-nf">newInstance</span><span class="highlight-p">(</span><span class="highlight-nx">componentType</span><span class="highlight-p">,</span> <span class="highlight-nx">newLength</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nf">arraycopy</span><span class="highlight-p">(</span><span class="highlight-nx">a</span><span class="highlight-p">,</span> <span class="highlight-mi">0</span><span class="highlight-p">,</span> <span class="highlight-nx">newArray</span><span class="highlight-p">,</span> <span class="highlight-mi">0</span><span class="highlight-p">,</span> <span class="highlight-nx">Math</span><span class="highlight-p">.</span><span class="highlight-nf">min</span><span class="highlight-p">(</span><span class="highlight-nx">length</span><span class="highlight-p">,</span> <span class="highlight-nx">newLength</span><span class="highlight-p">));</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">return</span> <span class="highlight-nx">newArray</span><span class="highlight-p">;</span>
 &nbsp;  <span class="highlight-p">}</span>
<span class="highlight-p">}</span>
</code></pre>
<h2 id="调用任意方法">调用任意方法</h2>
<p>  Java 设计者认为方法指针是很危险的，并常常会带来隐患。而 Java 提供接口是一种更好地解决方案。然而，反射机制允许你调用任意方法。</p>
<p>  在 Method 类中有一个 invoke 方法，它允许调用包装在当前 Method 对象中的方法。</p>
<p>  invoke 的方法签名是：</p>
<pre><code class="highlight-chroma">Object invoke(Object obj, Object... args)
</code></pre>
<p>  第一个参数是隐式参数，其余对象提供了显式参数。假设用 ml 代表 Employee 类的 getName 方法，调用方式如下：</p>
<pre><code class="highlight-chroma">String n = (String) ml.invoke(harry);
</code></pre>
<p>  如果返回类型是基本类型， invoke 方法会返回其包装器类型。例如：</p>
<pre><code class="highlight-chroma">double s = (Double) ml.invoke(harry);
</code></pre>
<p>  如何获得 Method 对象呢？可以通过调用 getDeclareMethods 方法，然后对返回的 Method 对象数组进行查找，知道找到想要的方法位置。也可以通过调用 Class 类中的的 getMethod 方法得到想要的方法。</p>
<pre><code class="highlight-chroma">Method getMethod(String name, Class... parameterTypes);
</code></pre>
<pre><code class="language-go highlight-chroma"><span class="highlight-kn">package</span> <span class="highlight-nx">book</span><span class="highlight-p">.</span><span class="highlight-nx">test</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">methods</span><span class="highlight-p">;</span>

<span class="highlight-kn">import</span> <span class="highlight-nx">java</span><span class="highlight-p">.</span><span class="highlight-nx">lang</span><span class="highlight-p">.</span><span class="highlight-nx">reflect</span><span class="highlight-p">.</span><span class="highlight-nx">Method</span><span class="highlight-p">;</span>

<span class="highlight-cm">/**
</span><span class="highlight-cm"> * @PROJECT_NAME: DataStructures
</span><span class="highlight-cm"> * @ClassName MethodTableTest
</span><span class="highlight-cm"> * @Author YHL
</span><span class="highlight-cm"> * @Email 1359541394@qq.com
</span><span class="highlight-cm"> * @Date 2020/10/17 17:35
</span><span class="highlight-cm"> * @Version 1.0
</span><span class="highlight-cm"> * @Description TODO
</span><span class="highlight-cm"> */</span>
<span class="highlight-nx">public</span> <span class="highlight-nx">class</span> <span class="highlight-nx">MethodTableTest</span> <span class="highlight-p">{</span>
 &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">main</span><span class="highlight-p">(</span><span class="highlight-nx">String</span><span class="highlight-p">[]</span> <span class="highlight-nx">args</span><span class="highlight-p">)</span> <span class="highlight-nx">throws</span> <span class="highlight-nx">NoSuchMethodException</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Method</span> <span class="highlight-nx">sequare</span> <span class="highlight-p">=</span> <span class="highlight-nx">MethodTableTest</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">.</span><span class="highlight-nf">getMethod</span><span class="highlight-p">(</span><span class="highlight-s">"square"</span><span class="highlight-p">,</span> <span class="highlight-nx">double</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">Method</span> <span class="highlight-nx">sqrt</span> <span class="highlight-p">=</span> <span class="highlight-nx">Math</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">.</span><span class="highlight-nf">getMethod</span><span class="highlight-p">(</span><span class="highlight-s">"sqrt"</span><span class="highlight-p">,</span> <span class="highlight-nx">double</span><span class="highlight-p">.</span><span class="highlight-nx">class</span><span class="highlight-p">);</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-nf">printTable</span><span class="highlight-p">(</span><span class="highlight-mi">1</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">,</span> <span class="highlight-nx">sequare</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nf">printTable</span><span class="highlight-p">(</span><span class="highlight-mi">1</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">,</span> <span class="highlight-mi">10</span><span class="highlight-p">,</span> <span class="highlight-nx">sqrt</span><span class="highlight-p">);</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-c1">// 计算平方值
</span><span class="highlight-c1"></span> &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">double</span> <span class="highlight-nf">square</span><span class="highlight-p">(</span><span class="highlight-nx">double</span> <span class="highlight-nx">x</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">return</span> <span class="highlight-nx">x</span> <span class="highlight-o">*</span> <span class="highlight-nx">x</span><span class="highlight-p">;</span>
 &nbsp;  <span class="highlight-p">}</span>

 &nbsp;  <span class="highlight-nx">public</span> <span class="highlight-nx">static</span> <span class="highlight-nx">void</span> <span class="highlight-nf">printTable</span><span class="highlight-p">(</span><span class="highlight-nx">double</span> <span class="highlight-nx">from</span><span class="highlight-p">,</span> <span class="highlight-nx">double</span> <span class="highlight-nx">to</span><span class="highlight-p">,</span> <span class="highlight-kt">int</span> <span class="highlight-nx">n</span><span class="highlight-p">,</span> <span class="highlight-nx">Method</span> <span class="highlight-nx">f</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-c1">// 打印方法签名
</span><span class="highlight-c1"></span> &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nb">println</span><span class="highlight-p">(</span><span class="highlight-nx">f</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">double</span> <span class="highlight-nx">dx</span> <span class="highlight-p">=</span> <span class="highlight-p">(</span><span class="highlight-nx">to</span> <span class="highlight-o">-</span> <span class="highlight-nx">from</span><span class="highlight-p">)</span> <span class="highlight-o">/</span> <span class="highlight-p">(</span><span class="highlight-nx">n</span> <span class="highlight-o">-</span> <span class="highlight-mi">1</span><span class="highlight-p">);</span>

 &nbsp; &nbsp; &nbsp;  <span class="highlight-k">for</span> <span class="highlight-p">(</span><span class="highlight-nx">double</span> <span class="highlight-nx">x</span> <span class="highlight-p">=</span> <span class="highlight-nx">from</span><span class="highlight-p">;</span> <span class="highlight-nx">x</span> <span class="highlight-o">&lt;=</span> <span class="highlight-nx">to</span><span class="highlight-p">;</span> <span class="highlight-nx">x</span> <span class="highlight-o">+=</span> <span class="highlight-nx">dx</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">try</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">double</span> <span class="highlight-nx">y</span> <span class="highlight-p">=</span> <span class="highlight-p">(</span><span class="highlight-nx">Double</span><span class="highlight-p">)</span> <span class="highlight-nx">f</span><span class="highlight-p">.</span><span class="highlight-nf">invoke</span><span class="highlight-p">(</span><span class="highlight-nx">null</span><span class="highlight-p">,</span> <span class="highlight-nx">x</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">System</span><span class="highlight-p">.</span><span class="highlight-nx">out</span><span class="highlight-p">.</span><span class="highlight-nf">printf</span><span class="highlight-p">(</span><span class="highlight-s">"%10.4f | %10.4f\n"</span><span class="highlight-p">,</span> <span class="highlight-nx">x</span><span class="highlight-p">,</span> <span class="highlight-nx">y</span><span class="highlight-p">);</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span> <span class="highlight-nf">catch</span> <span class="highlight-p">(</span><span class="highlight-nx">Exception</span> <span class="highlight-nx">e</span><span class="highlight-p">)</span> <span class="highlight-p">{</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-nx">e</span><span class="highlight-p">.</span><span class="highlight-nf">printStackTrace</span><span class="highlight-p">();</span>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp; &nbsp; &nbsp;  <span class="highlight-p">}</span>
 &nbsp;  <span class="highlight-p">}</span>
<span class="highlight-p">}</span>
</code></pre>
<p>  运行结果</p>
<pre><code class="highlight-chroma">public static double book.test.reflect.methods.MethodTableTest.square(double)
 &nbsp;  1.0000 | &nbsp; &nbsp; 1.0000
 &nbsp;  2.0000 | &nbsp; &nbsp; 4.0000
 &nbsp;  3.0000 | &nbsp; &nbsp; 9.0000
 &nbsp;  4.0000 | &nbsp;  16.0000
 &nbsp;  5.0000 | &nbsp;  25.0000
 &nbsp;  6.0000 | &nbsp;  36.0000
 &nbsp;  7.0000 | &nbsp;  49.0000
 &nbsp;  8.0000 | &nbsp;  64.0000
 &nbsp;  9.0000 | &nbsp;  81.0000
 &nbsp; 10.0000 | &nbsp; 100.0000
public static double java.lang.Math.sqrt(double)
 &nbsp;  1.0000 | &nbsp; &nbsp; 1.0000
 &nbsp;  2.0000 | &nbsp; &nbsp; 1.4142
 &nbsp;  3.0000 | &nbsp; &nbsp; 1.7321
 &nbsp;  4.0000 | &nbsp; &nbsp; 2.0000
 &nbsp;  5.0000 | &nbsp; &nbsp; 2.2361
 &nbsp;  6.0000 | &nbsp; &nbsp; 2.4495
 &nbsp;  7.0000 | &nbsp; &nbsp; 2.6458
 &nbsp;  8.0000 | &nbsp; &nbsp; 2.8284
 &nbsp;  9.0000 | &nbsp; &nbsp; 3.0000
 &nbsp; 10.0000 | &nbsp; &nbsp; 3.1623
</code></pre>
<p>  invoke 的参数和返回值必须是 Object 类型的。这意味需要进行多次的类型转换。不仅如此，使用反射获得方法指针的代码要比仅仅直接调用方法明显慢得多。</p>
<p>  有鉴于此，建议在必要的时候才使用 Method 对象，而最好使用接口以及 Java SE 8 中的 lambda 表达式。</p>
                    <div>
                        <hr>

标题：反射<br>
作者：<a href="https://ZZUGeneral.github.io" target="_blank">General</a><br>
地址：<a href="https://ZZUGeneral.github.io/articles/2020/10/17/1602938025485.html" target="_blank">https://ZZUGeneral.github.io/articles/2020/10/17/1602938025485.html</a><br>
一个没有得到Java开发工作的测试员！
<!-- 签名档内可使用 HTML、JavaScript -->
<br>
                    </div>
            </section>
        </div>

    </div>
        <div class="post__toc">
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#Class类">Class 类</a>
        </li>
        <li class="toc__h2">
            <a href="#利用反射分析类的能力">利用反射分析类的能力</a>
        </li>
        <li class="toc__h2">
            <a href="#在运行时使用反射分析对象">在运行时使用反射分析对象</a>
        </li>
        <li class="toc__h2">
            <a href="#使用反射编写泛型数组代码">使用反射编写泛型数组代码</a>
        </li>
        <li class="toc__h2">
            <a href="#调用任意方法">调用任意方法</a>
        </li>
</ul>        </div>
        <div class="wrapper">
            <div id="gitalk-container"></div>
            <div id="vcomment"
                 style="    margin-bottom: 40px; margin-top: 80px;
        border: 1px solid rgba(255,255,255,0.8);
        border-radius: 5px;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 1px 4px rgba(0,0,0,0.04);
        padding: 20px;"
                 data-name="General" data-postId="1602938025485"></div>
            <div id="b3logsolocomments"></div>
        </div>
    <div class="article__bottom">
        <div class="wrapper">
            <div class="fn__flex">
                <div class="item" id="randomArticles"></div>
                <div class="item" id="relevantArticles"></div>
            </div>
        </div>
    </div>
    
</div>
<script type="text/javascript"
        src="https://ZZUGeneral.github.io/skins/Bubble/js/TweenMax.min.js?1602754508835"
        charset="utf-8"></script>
<footer class="footer">
    <div class="wrapper">
            <a href="https://ld246.com/member/General"
       title="https://ld246.com/member/General"
       class="user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/ZZUGeneral"
           title="https://github.com/ZZUGeneral"
           class="user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

        <a href="https://www.linkedin.com/in/yhlgeneral"
           title="https://www.linkedin.com/in/yhlgeneral"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.32 23.443h4.211v-12.651h-4.211v12.651zM8.805 6.891c-0.018-1.24-0.911-2.188-2.352-2.188s-2.388 0.948-2.388 2.188c0 1.203 0.911 2.187 2.333 2.187h0.018c1.477 0 2.388-0.984 2.388-2.187zM19.469 23.443h4.211v-7.255c0-3.883-2.078-5.688-4.849-5.688-2.26 0-3.263 1.258-3.81 2.133h0.036v-1.841h-4.211s0.055 1.185 0 12.651v0h4.211v-7.073c0-0.365 0.018-0.747 0.128-1.021 0.31-0.747 1.003-1.531 2.169-1.531 1.513 0 2.115 1.148 2.115 2.862v6.763zM28 5.25v17.5c0 2.898-2.352 5.25-5.25 5.25h-17.5c-2.898 0-5.25-2.352-5.25-5.25v-17.5c0-2.898 2.352-5.25 5.25-5.25h17.5c2.898 0 5.25 2.352 5.25 5.25z"></path>
            </svg>
        </a>
        <a href="https://weibo.com/18203879479"
           title="https://weibo.com/18203879479"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
                <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
                <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
                <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
            </svg>
        </a>
        <a href="https://www.zhihu.com/people/general-54-18"
           title="https://www.zhihu.com/people/general-54-18"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M32 26.67c0 2.931-2.382 5.33-5.33 5.33h-21.339c-2.948 0-5.33-2.382-5.33-5.33v-21.339c0-2.948 2.382-5.33 5.33-5.33h21.339c2.948 0 5.33 2.382 5.33 5.33v21.339zM12.358 17.191h4.713c0-1.114-0.531-1.748-0.531-1.748h-4.079c0.103-2.005 0.189-4.576 0.223-5.536h3.874s-0.017-1.645-0.463-1.645h-6.822s0.411-2.142 0.96-3.085c0 0-2.040-0.12-2.742 2.605-0.686 2.725-1.731 4.354-1.851 4.662s0.6 0.137 0.891 0c0.309-0.137 1.663-0.617 2.057-2.537h2.108c0.034 1.2 0.12 4.885 0.086 5.536h-4.336c-0.6 0.446-0.823 1.748-0.823 1.748h4.971c-0.206 1.371-0.566 3.137-1.080 4.062-0.806 1.491-1.234 2.828-4.131 5.176 0 0-0.48 0.36 0.994 0.223 1.474-0.12 2.845-0.514 3.839-2.434 0.514-0.994 1.011-2.28 1.423-3.565l4.079 4.713s0.548-1.268 0.137-2.657l-3.034-3.394-1.028 0.754c0.291-0.994 0.497-1.988 0.548-2.845 0.017 0.017 0.017 0 0.017-0.034zM18.048 7.936v16.3h1.714l0.703 1.954 2.965-1.954h3.754v-16.3h-9.136zM25.401 22.487h-1.937l-2.434 1.611-0.566-1.611h-0.6v-12.735h5.553v12.735h-0.017z"></path>
            </svg>
        </a>
        <a href="tencent://message/?uin=1359541394"
           title="1359541394"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.821 14.393c-0.125-0.304-0.143-0.607-0.143-0.929 0-0.5 0.321-1.304 0.625-1.679-0.018-0.464 0.179-1.411 0.536-1.714 0-3.304 2.554-7.464 5.536-8.893 1.839-0.875 3.768-1.179 5.786-1.179 1.571 0 3.286 0.375 4.75 0.982 4.196 1.768 5.143 5.054 6.036 9.25l0.018 0.089c0.518 0.786 0.982 1.714 0.982 2.679 0 0.482-0.321 0.964-0.321 1.393 0 0.036 0.107 0.179 0.125 0.214 1.536 2.268 2.929 4.732 2.929 7.554 0 0.625-0.339 2.804-1.339 2.804-0.696 0-1.464-1.696-1.714-2.161-0.018-0.018-0.036-0.018-0.054-0.018l-0.089 0.071c-0.571 1.482-1.196 2.875-2.357 3.982 1.018 0.982 2.661 0.893 2.964 2.589-0.089 0.196-0.054 0.411-0.196 0.607-1.018 1.536-3.75 1.732-5.393 1.732-2.179 0-3.946-0.571-6-1.179-0.429-0.125-1.071-0.054-1.536-0.107-1.089 1.196-3.75 1.518-5.286 1.518-1.357 0-6.607-0.089-6.607-2.411 0-1 0.214-1.286 0.911-1.929 0.554-0.107 0.964-0.411 1.607-0.446 0.089 0 0.161-0.018 0.25-0.036 0.018-0.018 0.036-0.018 0.036-0.071l-0.036-0.054c-1.232-0.286-2.964-3.393-3.232-4.679l-0.089-0.054c-0.125 0-0.179 0.268-0.214 0.357-0.393 0.911-1.321 1.893-2.357 2h-0.018c-0.143 0-0.089-0.143-0.196-0.179-0.25-0.589-0.411-1.125-0.411-1.786 0-3.571 1.714-6.214 4.5-8.321z"></path>
            </svg>
        </a>
        <a href="javascript:void(0)"
           class="user__site" title="18203879479">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
            </svg>
        </a>
 <br>
        &copy; 2020
        <a href="https://ZZUGeneral.github.io">General 的个人博客</a>
        你一定会喜欢那个因为喜欢她而发光的自己！
        <span class="footer__heart">❤️</span><br>
        <div align="center">
          <a target="_blank" href="http://beian.miit.gov.cn" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">豫ICP备2020028892号-1</p></a> &nbsp;
          <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41132602001081" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="https://img.hacpai.com/file/2019/07/备案图标-cc568907.png" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">豫公网安备 41132602001081号</p></a>
        </div>
    </div>
</footer>
<svg class="side__top" id="sideTop" version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
    <path d="M26.562 13.958c0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303v0c0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303v0zM23.305 10.7c0 0 0 0 0 0 0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303c0-0 0-0 0-0v0c0-0 0-0 0-0 0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303c0 0 0 0 0 0v0zM20.022 7.417c0 0 0 0 0 0 0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303c0-0 0-0 0-0v0c0-0 0-0 0-0 0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303c0 0 0 0 0 0v0zM29.67 0h-27.339c-0.677 0-1.228 0.551-1.228 1.228s0.551 1.228 1.228 1.228h11.151l-10.725 10.725c-0.476 0.476-0.476 1.253 0 1.729 0.226 0.226 0.551 0.351 0.852 0.351s0.626-0.125 0.852-0.351l10.074-10.074v25.936c0 0.677 0.551 1.228 1.228 1.228s1.228-0.551 1.228-1.228v-26.011c0.476 0.426 1.203 0.426 1.679-0.050s0.476-1.253 0-1.729l-0.576-0.576h11.577c0.677 0 1.228-0.551 1.228-1.228 0-0.626-0.551-1.178-1.228-1.178z"></path>
</svg>
<script>
  var Label = {
    speech: true,
    servePath: "https://ZZUGeneral.github.io",
    staticServePath: "https://ZZUGeneral.github.io",
    luteAvailable: true,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "4.3.1",
    staticSite: true,
    showCodeBlockLn: false,
    articleId: "1602938025485",
  }
</script>
<script type="text/javascript"
        src="https://ZZUGeneral.github.io/skins/Bubble/js/common.min.js?1602754508835"
        charset="utf-8"></script>
<script type="text/javascript"
        src="https://ZZUGeneral.github.io/skins/Bubble/js/circleMagic.min.js?1602754508835"
        charset="utf-8"></script>

    <svg viewBox="0 0 32 32" width="100%" height="100%" class="side__top side__top--toc">
        <path d="M30 18h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM30 6.25h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM2 25.75h28c1.1 0 2 0.9 2 2s-0.9 2-2 2h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2z"></path>
    </svg>

<script type="text/javascript">
    Util.addScript('https://ZZUGeneral.github.io/js/page.min.js?1602754508835', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论不能为空",
        "oId": "1602938025485",
        "blogHost": "https://ZZUGeneral.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
        page.loadRandomArticles('<h3>随机阅读</h3>');
        page.loadRelevantArticles('1602938025485', '<h3>相关阅读</h3>');
    Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 41ms, 2020/10/21 08:28:34 -->