<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>Nmap 使用教程 - General 的个人博客</title><meta name="description" content="杨贺龙的博客系统。"/><meta property="og:description" content="杨贺龙的博客系统。"/>    <meta name="keywords" content="Solo,Java, 安全,测试博客,开源,Linux,CentOS,Ubuntu,Docker,Spring Boot,Swagger,SQLMAP,Web渗透"/><link rel="dns-prefetch" href="https://ZZUGEneral.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://ZZUGEneral.github.io"><link rel="icon" type="image/png" href="https://static.b3log.org/images/brand/solo-128.png"/><link rel="apple-touch-icon" href="https://static.b3log.org/images/brand/solo-128.png"><link rel="shortcut icon" type="image/x-icon" href="https://static.b3log.org/images/brand/solo-128.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="Nmap 使用教程 - General 的个人博客"/><meta property="og:site_name" content="General 的个人博客"/><meta property="og:url"      content="https://ZZUGEneral.github.io/articles/2020/10/26/1603708218188.html?"/><meta property="og:image" content="https://static.b3log.org/images/brand/solo-128.png"/><link rel="search" type="application/opensearchdescription+xml" title="Nmap 使用教程 - General 的个人博客" href="/opensearch.xml"><link href="https://ZZUGEneral.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://ZZUGEneral.github.io/manifest.json">        <link rel="canonical" href="https://ZZUGEneral.github.io/articles/2020/10/26/1603708218188.html">        <link rel="stylesheet"
              href="https://ZZUGEneral.github.io/skins/Bubble/css/base.css?1602754508835"/>
            <link rel="prev" title="Whatweb 使用教程" href="https://ZZUGEneral.github.io/articles/2020/10/26/1603679856210.html">
            <link rel="next" title="XPath注入" href="https://ZZUGEneral.github.io/articles/2020/10/27/1603789794959.html">
    <script src="https://cdn.jsdelivr.net/npm/vditor@3.5.3/dist/js/icons/ant.js" async="" id="vditorIconScript"></script></head>
<body class="fn__flex-column">
<div id="pjax" class="fn__flex-1">
    
    <progress class="fn__progress"></progress>
    <header class="header header--article">
        <div class="wrapper header__title">
            <h1 class="header__h1 fn__flex-inline">
                <a href="https://ZZUGEneral.github.io" rel="start">General 的个人博客</a>
            </h1>
            <h2 class="header__desc header__desc--title">你一定会喜欢那个因为喜欢她而发光的自己！</h2>
            <div class="header__desc">
                <h2>人间忽晚，山河已秋。</h2>
<!-- 公告栏可使用 HTML、JavaScript，比如可以在此加入第三方统计 js -->
            </div>
            <svg class="header__down" id="headerDown" viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M15.992 25.304c-0 0-0 0-0.001 0-0.516 0-0.981-0.216-1.31-0.563l-0.001-0.001-14.187-14.996c-0.306-0.323-0.494-0.76-0.494-1.241 0-0.998 0.809-1.807 1.807-1.807 0.517 0 0.983 0.217 1.313 0.565l0.001 0.001 12.875 13.612 12.886-13.612c0.331-0.348 0.797-0.565 1.314-0.565 0.481 0 0.918 0.187 1.242 0.493l-0.001-0.001c0.723 0.687 0.755 1.832 0.072 2.555l-14.201 14.996c-0.33 0.348-0.795 0.564-1.311 0.564-0.001 0-0.003 0-0.004 0h0z"></path>
            </svg>
        </div>
    </header>
    <div class="side__menu">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M30 18h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM30 6.25h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM2 25.75h28c1.1 0 2 0.9 2 2s-0.9 2-2 2h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2z"></path>
        </svg>
        <span>
            &nbsp; menu
        </span>
    </div>
    <div class="side__main">
        <div class="side__bg"></div>
        <div class="side__panel">
            <svg class="side__close ft__a" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                 viewBox="0 0 20 20">
                <path d="M18.362 19.324c-0.902 0.902-2.363 0.902-3.263 0l-5.098-5.827-5.098 5.825c-0.902 0.902-2.363 0.902-3.263 0-0.902-0.902-0.902-2.363 0-3.263l5.304-6.057-5.306-6.061c-0.902-0.902-0.902-2.361 0-3.263s2.361-0.902 3.263 0l5.1 5.829 5.098-5.829c0.902-0.902 2.361-0.902 3.263 0s0.902 2.363 0 3.263l-5.304 6.061 5.304 6.057c0.902 0.902 0.902 2.363 0 3.265z"></path>
            </svg>

            <div class="side__header">
                <a href="https://ZZUGEneral.github.io" rel="start"><img class="side__logo" alt="General 的个人博客" src="https://b3logfile.com/avatar/1596873896447_1600698145202.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"></a>

                <div class="side__meta">
                    48 文章 <br>
                    <span data-uvstaturl="https://ZZUGEneral.github.io">0</span> 浏览
                    
                </div>
            </div>

            <div class="side__title">
                <span>ღゝ◡╹)ノ❤️</span>
            </div>
            <ul class="side__nav">
                <li>
                    <a href="https://ZZUGEneral.github.io" rel="start">
                            General 的个人博客
                    </a>
                </li>
                    <li>
                        <a href="/my-github-repos" target="_self"><img
                                class="page-icon" src="/images/github-icon.png" alt="我的开源">我的开源</a>
                    </li>
                <li>
                    <a href="https://ZZUGEneral.github.io/categories.html">分类</a>
                </li>
                <li>
                    <a href="https://ZZUGEneral.github.io/tags.html">标签墙</a>
                </li>
                <li>
                    <a href="https://ZZUGEneral.github.io/archives.html">存档</a>
                </li>
                <li>
                    <a href="https://ZZUGEneral.github.io/links.html">友链</a>
                </li>
                <li>
                    <a rel="alternate" href="https://ZZUGEneral.github.io/rss.xml">RSS</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="article__top" style="background-image: url(https://b3logfile.com/bing/20190331.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100)">
        <div style="background-image: url(https://b3logfile.com/bing/20190331.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100)"></div>
        <canvas id="articleTop"></canvas>
    </div>
    <div class="article">
        <div class="ft__center">
            <div class="article__meta">
                <time>
                    2020-10-26
                </time>
                /
                    <a rel="tag"
                       href="https://ZZUGEneral.github.io/tags/Nmap">Nmap</a> &nbsp;
                    <a rel="tag"
                       href="https://ZZUGEneral.github.io/tags/%E5%B7%A5%E5%85%B7">工具</a> &nbsp;
                    <a rel="tag"
                       href="https://ZZUGEneral.github.io/tags/Web%E5%AE%89%E5%85%A8%E6%94%BB%E9%98%B2">Web安全攻防</a> &nbsp;
                    <a rel="tag"
                       href="https://ZZUGEneral.github.io/tags/Web%E6%B8%97%E9%80%8F">Web渗透</a> &nbsp;
            </div>
            <h2 class="article__title">
                Nmap 使用教程
            </h2>
<div class="article__share"
     data-title="Nmap 使用教程"
     data-blogtitle="General 的个人博客"
     data-url="https://ZZUGEneral.github.io/articles/2020/10/26/1603708218188.html"
     data-avatar="https://b3logfile.com/avatar/1596873896447_1600698145202.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100">
    <span class="item" data-type="qqz">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M22.824 13.989l-8.348 6.287s3.351 0.522 8.404 0.461l-0.23-1.040 7.2-6.549c0.132-0.12 0.183-0.312 0.129-0.487s-0.203-0.299-0.377-0.314l-9.492-0.856-3.708-9.213c-0.068-0.169-0.226-0.279-0.401-0.279s-0.333 0.11-0.401 0.279l-3.708 9.213-9.492 0.856c-0.174 0.015-0.323 0.139-0.377 0.314s-0.004 0.366 0.129 0.487l7.2 6.549-2.158 9.742c-0.040 0.178 0.026 0.365 0.168 0.474 0.142 0.107 0.331 0.115 0.481 0.021l8.158-5.165 8.158 5.165c0.070 0.045 0.147 0.066 0.225 0.066 0.090 0 0.18-0.029 0.256-0.086 0.142-0.109 0.208-0.295 0.168-0.474l-1.707-7.704c0.732-0.386 1.538-1.040 1.538-1.040s-3.195 1.638-14.664 0.838l8.312-6.325s-0.327-0.534-10.744-0.914c-0.697-0.026 8.493-1.83 15.281-0.305z"></path>
        </svg>
    </span>
    <span class="item" data-type="wechat">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
        </svg>
    </span>
    <span class="item" data-type="weibo">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
            <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
            <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
            <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
        </svg>
    </span>
    <span class="item" data-type="twitter">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32.003 6.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
        </svg>
    </span>
    <span class="item__qr"></span>
</div>        </div>
        <div class="wrapper">
            <section class="vditor-reset articles article__content">
                <h2 id="选项概要">选项概要</h2>
<p>Nmap 7.91SVN（<a href="https://nmap.org" target="_blank">https://nmap.org</a>）<br>
用法：nmap [扫描类型] [选项] {目标规范}<br>
目标规格：<br>
可以传递主机名，IP 地址，网络等。<br>
例如：scanme.nmap.org，microsoft.com/24，192.168.0.1；10.0.0-255.1-254<br>
-iL <inputfilename>：来自主机/网络列表的输入<br>
-iR &lt; 主机数量 &gt;：选择随机目标<br>
--exclude &lt;host1 [，host2] [，host3]，...&gt;：排除主机/网络<br>
--excludefile &lt;exclude_file&gt;：从文件中排除列表<br>
主机发现：<br>
-sL：列出扫描-仅列出要扫描的目标<br>
-sn：Ping 扫描-禁用端口扫描<br>
-Pn：将所有主机视为联机-跳过主机发现<br>
-PS / PA / PU / PY [端口列表]：对给定端口的 TCP SYN / ACK，UDP 或 SCTP 发现<br>
-PE / PP / PM：ICMP 回显，时间戳和网络掩码请求发现探针<br>
-PO [协议列表]：IP 协议 Ping<br>
-n / -R：从不进行 DNS 解析/始终解析[默认值：有时]<br>
--dns-servers &lt;serv1 [，serv2]，...&gt;：指定自定义 DNS 服务器<br>
--system-dns：使用操作系统的 DNS 解析器<br>
--traceroute：跟踪到每个主机的跃点路径<br>
扫描技术：<br>
-sS / sT / sA / sW / sM：TCP SYN / Connect（）/ ACK / Window / Maimon 扫描<br>
-sU：UDP 扫描<br>
-sN / sF / sX：TCP 空，FIN 和 Xmas 扫描<br>
--scanflags &lt; 标志 &gt;：自定义 TCP 扫描标志<br>
-sI &lt; 僵尸主机[：probeport]&gt;：空闲扫描<br>
-sY / sZ：SCTP INIT / COOKIE-ECHO 扫描<br>
-sO：IP 协议扫描<br>
-b &lt;FTP 中继主机 &gt;：FTP 退回扫描<br>
端口规格和扫描顺序：<br>
-p &lt; 端口范围 &gt;：仅扫描指定的端口<br>
例如：-p22; -p1-65535; -p U：53,111,137，T：21-25,80,139,8080，S：9<br>
--exclude-ports &lt; 端口范围 &gt;：从扫描中排除指定端口<br>
-F：快速模式-扫描的端口少于默认扫描<br>
-r：连续扫描端口-不要随机化<br>
--top-ports &lt; 编号 &gt;：扫描 &lt; 编号 &gt; 最常见的端口<br>
--port-ratio &lt; 比率 &gt;：扫描端口比 &lt; 比率 &gt; 更常见<br>
服务/版本检测：<br>
-sV：探测打开的端口以确定服务/版本信息<br>
--version-intensity &lt; 级别 &gt;：设置为 0（浅）至 9（尝试所有探针）<br>
--version-light：限制为最可能的探测（强度 2）<br>
--version-all：尝试每个探针（强度 9）<br>
--version-trace：显示详细的版本扫描活动（用于调试）<br>
脚本扫描：<br>
-sC：相当于--script = default<br>
--script = &lt;Lua 脚本 &gt;：&lt;Lua 脚本 &gt; 是逗号分隔的列表<br>
目录，脚本文件或脚本类别<br>
--script-args = &lt;n1 = v1，[n2 = v2，...]&gt;：提供脚本参数<br>
--script-args-file =文件名：在文件中提供 NSE 脚本 args<br>
--script-trace：显示所有发送和接收的数据<br>
--script-updatedb：更新脚本数据库。<br>
--script-help = &lt;Lua 脚本 &gt;：显示有关脚本的帮助。<br>
&lt;Lua 脚本 &gt; 是逗号分隔的脚本文件列表，或者<br>
脚本类别。<br>
操作系统检测：<br>
-O：启用操作系统检测<br>
--osscan-limit：将操作系统检测限制为有希望的目标<br>
--osscan-guess：更积极地猜测操作系统<br>
时序和性能：<br>
花费<time>的选项以秒为单位，或附加“ ms”（毫秒），<br>
值的“ s”（秒），“ m”（分钟）或“ h”（小时）（例如 30m）。<br>
-T &lt;0-5&gt;：设置时序模板（越高越快）<br>
--min-hostgroup / max-hostgroup &lt; 大小 &gt;：并行主机扫描组大小<br>
--min-parallelism / max-parallelism <numprobes>：探针并行化<br>
--min-rtt-timeout / max-rtt-timeout / initial-rtt-timeout &lt; 时间 &gt;：指定<br>
探测往返时间。<br>
--max-retries <tries>：限制端口扫描探针重传的次数。<br>
--host-timeout &lt; 时间 &gt;：在很长一段时间后放弃目标<br>
--scan-delay /-max-scan-delay &lt; 时间 &gt;：调整探头之间的延迟<br>
--min-rate <number>：每秒发送数据包的速度不低于<number><br>
--max-rate <number>：每秒发送数据包的速度不超过<number><br>
防火墙/标识闪避和疏散：<br>
-F; --mtu <val>：分段数据包（可选，带有给定的 MTU）<br>
-D &lt;decoy1，decoy2 [，ME]，...&gt;：用诱饵掩盖扫描<br>
-S &lt;IP 地址 &gt;：欺骗源地址<br>
-e <iface>：使用指定的接口<br>
-g /-source-port &lt; 端口号 &gt;：使用给定的端口号<br>
--proxies &lt;url1，[url2]，...&gt;：通过 HTTP / SOCKS4 代理中继连接<br>
--data &lt; 十六进制字符串 &gt;：将自定义有效负载附加到发送的数据包<br>
--data-string &lt; 字符串 &gt;：将自定义 ASCII 字符串附加到发送的数据包<br>
--data-length <num>：将随机数据附加到发送的数据包<br>
--ip-options &lt; 选项 &gt;：发送具有指定 ip 选项的数据包<br>
--ttl <val>：设置 IP 生存时间字段<br>
--spoof-mac &lt;mac 地址/前缀/供应商名称 &gt;：欺骗您的 MAC 地址<br>
--badsum：发送带有伪 TCP / UDP / SCTP 校验和的数据包<br>
输出：<br>
-oN / -oX / -oS / -oG &lt; 文件 &gt;：以普通，XML，s | &lt;rIpt kIddi3，<br>
和 Grepable 格式分别更改为给定的文件名。<br>
-oA <basename>：一次以三种主要格式输出<br>
-v：提高详细程度（使用-vv 或更高的效果更好）<br>
-d：提高调试级别（使用-dd 或更多以获得更大的效果）<br>
--reason：显示端口处于特定状态的原因<br>
--open：仅显示打开（或可能打开）的端口<br>
--packet-trace：显示所有发送和接收的数据包<br>
--iflist：打印主机接口和路由（用于调试）<br>
--append-output：追加而不是破坏指定的输出文件<br>
--resume &lt; 文件名 &gt;：恢复中止的扫描<br>
--stylesheet &lt; 路径/ URL&gt;：XSL 样式表，可将 XML 输出转换为 HTML<br>
--webxml：Nmap.Org 的参考样式表，用于更便携式的 XML<br>
--no-stylesheet：防止关联带有 XML 输出的 XSL 样式表<br>
MISC：<br>
-6：启用 IPv6 扫描<br>
-A：启用操作系统检测，版本检测，脚本扫描和跟踪路由<br>
--datadir &lt; 目录名 &gt;：指定自定义 Nmap 数据文件位置<br>
--send-eth /-send-ip：使用原始以太网帧或 IP 数据包发送<br>
--privileged：假定用户具有完全特权<br>
--unprivileged：假设用户缺乏原始套接字特权<br>
-V：打印版本号<br>
-h：打印此帮助摘要页面。<br>
例子：<br>
nmap -v -A scanme.nmap.org<br>
nmap -v -sn 192.168.0.0/16 10.0.0.0/8<br>
nmap -v -iR 10000 -Pn -p 80<br>
有关更多选项和示例，请参见手册页（<a href="https://nmap.org/book/man.html" target="_blank">https://nmap.org/book/man.html</a>）</basename></val></num></iface></val></number></number></number></number></tries></numprobes></time></inputfilename></p>
<h2 id="目标发现">目标发现</h2>
<p>除了选项，所有出现在 Nmap 命令行上的都被视为对目标主机的说明。 最简单的情况是指定一个目标 IP 地址或主机名。</p>
<p>有时候您希望扫描整个网络的相邻主机。为此，Nmap 支持 CIDR 风格的地址。您可以附加 一个/<numbit>在一个 IP 地址或主机名后面， Nmap 将会扫描所有和该参考 IP 地址具有 <numbit>相同比特的所有 IP 地址或主机。 例如，192.168.10.0/24 将会扫描 192.168.10.0 (二进制格式： 11000000 10101000 00001010 00000000)和 192.168.10.255 (二进制格式： 11000000 10101000 00001010 11111111)之间的 256 台主机。 192.168.10.40/24 将会做同样的事情。假设主机 scanme.nmap.org 的 IP 地址是 205.217.153.62， scanme.nmap.org/16 将扫描 205.217.0.0 和 205.217.255.255 之间的 65,536 个 IP 地址。 所允许的最小值是/1， 这将会扫描半个互联网。最大值是/32，这将会扫描该主机或 IP 地址， 因为所有的比特都固定了。</numbit></numbit></p>
<p>CIDR 标志位很简洁但有时候不够灵活。例如，您也许想要扫描 192.168.0.0/16，但略过任何以。0 或者。255 结束的 IP 地址，因为它们通常是广播地址。 Nmap 通过八位字节地址范围支持这样的扫描 您可以用逗号分开的数字或范围列表为 IP 地址的每个八位字节指定它的范围。 例如，192.168.0-255.1-254 将略过在该范围内以。0 和。255 结束的地址。 范围不必限于最后的 8 位：0-255.0-255.13.37 将在整个互联网范围内扫描所有以 13.37 结束的地址。 这种大范围的扫描对互联网调查研究也许有用。</p>
<h2 id="主机发现">主机发现</h2>
<ul>
<li>-sL (列表扫描)<br>
列表扫描是主机发现的退化形式，它仅仅列出指定网络上的每台主机， 不发送任何报文到目标主机。默认情况下，Nmap 仍然对主机进行反向域名解析以获取 它们的名字。</li>
<li>-sP (Ping 扫描)<br>
该选项告诉 Nmap <em>仅仅</em> 进行 ping 扫描 (主机发现)，然后打印出对扫描做出响应的那些主机。 没有进一步的测试 (如端口扫描或者操作系统探测)。 这比列表扫描更积极，常常用于 和列表扫描相同的目的。它可以得到些许目标网络的信息而不被特别注意到。</li>
<li>-P0 (无 ping)<br>
该选项完全跳过 Nmap 发现阶段。 通常 Nmap 在进行高强度的扫描时用它确定正在运行的机器。 默认情况下，Nmap 只对正在运行的主机进行高强度的探测如 端口扫描，版本探测，或者操作系统探测。用-P0 禁止 主机发现会使 Nmap 对<em>每一个</em>指定的目标 IP 地址 进行所要求的扫描。</li>
<li>-PS [portlist] (TCP SYN Ping)<br>
该选项发送一个设置了 SYN 标志位的空 TCP 报文。 默认目的端口为 80 (可以通过改变 nmap.h) 文件中的 DEFAULT-TCP-PROBE-PORT 值进行配置，但不同的端口也可以作为选项指定。</li>
<li>-PA [portlist] (TCP ACK Ping)<br>
TCP ACK ping 和刚才讨论的 SYN ping 相当类似。 也许您已经猜到了，区别就是设置 TCP 的 ACK 标志位而不是 SYN 标志位。 ACK 报文表示确认一个建立连接的尝试，但该连接尚未完全建立。 所以远程主机应该总是回应一个 RST 报文， 因为它们并没有发出过连接请求到运行 Nmap 的机器，如果它们正在运行的话。<br>
提供 SYN 和 ACK 两种 ping 探测的原因是使通过防火墙的机会尽可能大。 许多管理员会配置他们的路由器或者其它简单的防火墙来封锁 SYN 报文，除非 连接目标是那些公开的服务器像公司网站或者邮件服务器。 这可以阻止其它进入组织的连接，同时也允许用户访问互联网。 这种无状态的方法几乎不占用防火墙/路由器的资源，因而被硬件和软件过滤器 广泛支持。</li>
<li>-PU [portlist] (UDP Ping)<br>
还有一个主机发现的选项是 UDP ping，它发送一个空的(除非指定了--data-length UDP 报文到给定的端口。端口列表的格式和前面讨论过的-PS 和-PA 选项还是一样。 如果不指定端口，默认是 31338。<br>
如果目标机器的端口是关闭的，UDP 探测应该马上得到一个 ICMP 端口无法到达的回应报文。 这对于 Nmap 意味着该机器正在运行。 该扫描类型的主要优势是它可以穿越只过滤 TCP 的防火墙和过滤器。</li>
<li>-PE; -PP; -PM (ICMP Ping Types)<br>
除了前面讨论的这些不常见的 TCP 和 UDP 主机发现类型， Nmap 也能发送世人皆知的 ping 程序所发送的报文。</li>
<li>-PR (ARP Ping)<br>
最常见的 Nmap 使用场景之一是扫描一个以太局域网。 在大部分局域网上，特别是那些使用基于 RFC1918 私有地址范围的网络，在一个给定的时间绝大部分 IP 地址都是不使用的。<br>
当进行 ARP 扫描时，Nmap 用它优化的算法管理 ARP 请求。 当它收到响应时， Nmap 甚至不需要担心基于 IP 的 ping 报文，既然它已经知道该主机正在运行了。 这使得 ARP 扫描比基于 IP 的扫描更快更可靠。 所以默认情况下，如果 Nmap 发现目标主机就在它所在的局域网上，它会进行 ARP 扫描。</li>
<li>-n (不用域名解析)<br>
告诉 Nmap <em>永不</em>对它发现的活动 IP 地址进行反向域名解析。 既然 DNS 一般比较慢，这可以让事情更快些。</li>
<li>-R (为所有目标解析域名)<br>
告诉 Nmap <em>永远</em> 对目标 IP 地址作反向域名解析。 一般只有当发现机器正在运行时才进行这项操作。</li>
<li>--system-dns (使用系统域名解析器)<br>
默认情况下，Nmap 通过直接发送查询到您的主机上配置的域名服务器 来解析域名。为了提高性能，许多请求 (一般几十个 ) 并发执行。如果您希望使用系统自带的解析器，就指定该选项 (通过 getnameinfo()调用一次解析一个 IP)。</li>
</ul>
<h2 id="端口扫描基础">端口扫描基础</h2>
<p>虽然 Nmap 这些年来功能越来越多， 它也是从一个高效的端口扫描器开始的，并且那仍然是它的核心功能。</p>
<p>Nmap 把端口分成六个状态： open(开放的)， closed(关闭的)，filtered(被过滤的)， unfiltered(未被过滤的)， open|filtered(开放或者被过滤的)，或者 closed|filtered(关闭或者被过滤的)。这些状态并非端口本身的性质，而是描述 Nmap 怎样看待它们。</p>
<p>Nmap 识别的端口状态：</p>
<ul>
<li>open(开放的) : 应用程序正在该端口接收 TCP 连接或者 UDP 报文。</li>
<li>closed(关闭的) : 关闭的端口对于 Nmap 也是可访问的(它接受 Nmap 的探测报文并作出响应)， 但没有应用程序在其上监听。</li>
<li>filtered(被过滤的) ： 由于包过滤阻止探测报文到达端口， Nmap 无法确定该端口是否开放。过滤可能来自专业的防火墙设备，路由器规则 或者主机上的软件防火墙。</li>
<li>unfiltered(未被过滤的) : 未被过滤状态意味着端口可访问，但 Nmap 不能确定它是开放还是关闭。 只有用于映射防火墙规则集的 ACK 扫描才会把端口分类到这种状态。</li>
<li>open|filtered(开放或者被过滤的) : 当无法确定端口是开放还是被过滤的，Nmap 就把该端口划分成 这种状态。开放的端口不响应就是一个例子。</li>
<li>closed|filtered(关闭或者被过滤的) : 该状态用于 Nmap 不能确定端口是关闭的还是被过滤的。 它只可能出现在 IPID Idle 扫描中。</li>
</ul>
<h2 id="端口扫描技术">端口扫描技术</h2>
<p>大部分扫描类型只对特权用户可用。 这是因为他们发送接收原始报文，这在 Unix 系统需要 root 权限。 在 Windows 上推荐使用 administrator 账户，但是当 WinPcap 已经被加载到操作系统时， 非特权用户也可以正常使用 Nmap。</p>
<p>虽然 Nmap 努力产生正确的结果，但请记住所有结果都是基于目标机器(或者它们前面的防火墙)返回的报文的。 。这些主机也许是不值得信任的，它们可能响应以迷惑或误导 Nmap 的报文。 更普遍的是非 RFC 兼容的主机以不正确的方式响应 Nmap 探测。FIN，Null 和 Xmas 扫描 特别容易遇到这个问题。这些是特定扫描类型的问题，因此我们在个别扫描类型里讨论它们。</p>
<p>默认情况下，Nmap 执行一个 SYN 扫描，但是如果用户没有权限发送原始报文(在 UNIX 上需要 root 权限)或者如果指定的是 IPv6 目标，Nmap 调用 connect()。</p>
<ul>
<li>
<p>-sS (TCP SYN 扫描)<br>
SYN 扫描作为默认的也是最受欢迎的扫描选项，是有充分理由的。 它执行得很快，在一个没有入侵防火墙的快速网络上，每秒钟可以扫描数千个 端口。 SYN 扫描相对来说不张扬，不易被注意到，因为它从来不完成 TCP 连接。 它也不像 Fin/Null/Xmas，Maimon 和 Idle 扫描依赖于特定平台，而可以应对任何兼容的 TCP 协议栈。 它还可以明确可靠地区分 open(开放的)， closed(关闭的)，和 filtered(被过滤的) 状态<br>
它常常被称为半开放扫描， 因为它不打开一个完全的 TCP 连接。它发送一个 SYN 报文， 就像您真的要打开一个连接，然后等待响应。 SYN/ACK 表示端口在监听 (开放)，而 RST (复位)表示没有监听者。如果数次重发后仍没响应， 该端口就被标记为被过滤。如果收到 ICMP 不可到达错误 (类型 3，代码 1，2，3，9，10，或者 13)，该端口也被标记为被过滤。</p>
</li>
<li>
<p>-sT (TCP connect()扫描)<br>
当 SYN 扫描不能用时，CP Connect()扫描就是默认的 TCP 扫描。 当用户没有权限发送原始报文或者扫描 IPv6 网络时，就是这种情况。不像大多数其他扫描类型那样写原始数据包，Nmap 通过创建 connect() 系统调用要求操作系统和目标机以及端口建立连接，而不像其它扫描类型直接发送原始报文。 这是和 Web 浏览器，P2P 客户端以及大多数其它网络应用程序用以建立连接一样的 高层系统调用。它是叫做 Berkeley Sockets API 编程接口的一部分。Nmap 用 该 API 获得每个连接尝试的状态信息，而不是读取响应的原始报文。<br>
当 SYN 扫描可用时，它通常是更好的选择。因为 Nmap 对高层的 connect()调用比对原始报文控制更少， 所以前者效率较低。 该系统调用完全连接到开放的目标端口而不是像 SYN 扫描进行 半开放的复位。这不仅花更长时间，需要更多报文得到同样信息，目标机也更可能 记录下连接。IDS(入侵检测系统)可以捕获两者，但大部分机器没有这样的警报系统。 当 Nmap 连接，然后不发送数据又关闭连接， 许多普通 UNIX 系统上的服务会在 syslog 留下记录，有时候是一条加密的错误消息。</p>
</li>
<li>
<p>-sU (UDP 扫描)<br>
虽然互联网上很多流行的服务运行在 TCP 协议上，<a href="http://www.rfc-editor.org/rfc/rfc768.txt" target="_blank">UDP</a> 服务也不少。 DNS，SNMP，和 DHCP (注册的端口是 53，161/162，和 67/68)是最常见的三个。 因为 UDP 扫描一般较慢，比 TCP 更困难，一些安全审核人员忽略这些端口。 这是一个错误，因为可探测的 UDP 服务相当普遍，攻击者当然不会忽略整个协议。 所幸，Nmap 可以帮助记录并报告 UDP 端口。<br>
UDP 扫描用-sU 选项激活。它可以和 TCP 扫描如 SYN 扫描 (-sS)结合使用来同时检查两种协议。<br>
UDP 扫描发送空的(没有数据)UDP 报头到每个目标端口。 如果返回 ICMP 端口不可到达错误(类型 3，代码 3)， 该端口是 closed(关闭的)。 其它 ICMP 不可到达错误(类型 3， 代码 1，2，9，10，或者 13)表明该端口是 filtered(被过滤的)。 偶尔地，某服务会响应一个 UDP 报文，证明该端口是 open(开放的)。 如果几次重试后还没有响应，该端口就被认为是 open|filtered(开放 | 被过滤的)。 这意味着该端口可能是开放的，也可能包过滤器正在封锁通信。 可以用版本扫描(-sV)帮助区分真正的开放端口和被过滤的端口。</p>
</li>
<li>
<p>-sN; -sF; -sX (TCP Null，FIN，and Xmas 扫描)<br>
这三种扫描类型 (甚至用下一节描述的 --scanflags 选项的更多类型) 在 <a href="http://www.rfc-editor.org/rfc/rfc793.txt" target="_blank">TCP RFC</a> 中发掘了一个微妙的方法来区分 open(开放的)和 closed(关闭的)端口。“如果 [目标]端口状态是关闭的.... 进入的不含 RST 的报文导致一个 RST 响应。” 接下来的一页 讨论不设置 SYN，RST，或者 ACK 位的报文发送到开放端口： “理论上，这不应该发生，如果您确实收到了，丢弃该报文，返回。 ”<br>
如果扫描系统遵循该 RFC，当端口关闭时，任何不包含 SYN，RST，或者 ACK 位的报文会导致 一个 RST 返回，而当端口开放时，应该没有任何响应。只要不包含 SYN，RST，或者 ACK， 任何其它三种(FIN，PSH，and URG)的组合都行。Nmap 有三种扫描类型利用这一点：</p>
<ul>
<li>Null 扫描 (-sN)<br>
不设置任何标志位(tcp 标志头是 0)</li>
<li>FIN 扫描 (-sF)<br>
只设置 TCP FIN 标志位。</li>
<li>Xmas 扫描 (-sX)<br>
设置 FIN，PSH，和 URG 标志位，就像点亮圣诞树上所有的灯一样。</li>
</ul>
<p>除了探测报文的标志位不同，这三种扫描在行为上完全一致。 如果收到一个 RST 报文，该端口被认为是 closed(关闭的)，而没有响应则意味着 端口是 open|filtered(开放或者被过滤的)。 如果收到 ICMP 不可到达错误(类型 3，代号 1，2，3，9，10，或者 13)，该端口就被标记为 被过滤的。<br>
这些扫描的关键优势是它们能躲过一些无状态防火墙和报文过滤路由器。 另一个优势是这些扫描类型甚至比 SYN 扫描还要隐秘一些。但是别依赖它 -- 多数 现代的 IDS 产品可以发现它们。一个很大的不足是并非所有系统都严格遵循 RFC 793。 许多系统不管端口开放还是关闭，都响应 RST。 这导致所有端口都标记为 closed(关闭的)。 这样的操作系统主要有 Microsoft Windows，许多 Cisco 设备，BSDI，以及 IBM OS/400。 但是这种扫描对多数 UNIX 系统都能工作。这些扫描的另一个不足是 它们不能辨别 open(开放的)端口和一些特定的 filtered(被过滤的)端口，从而返回 open|filtered(开放或者被过滤的)。</p>
</li>
<li>
<p>-sA (TCP ACK 扫描)<br>
这种扫描与目前为止讨论的其它扫描的不同之处在于它不能确定 open(开放的)或者 open|filtered(开放或者过滤的))端口。 它用于发现防火墙规则，确定它们是有状态的还是无状态的，哪些端口是被过滤的。<br>
ACK 扫描探测报文只设置 ACK 标志位(除非您使用 --scanflags)。当扫描未被过滤的系统时， open(开放的)和 closed(关闭的) 端口 都会返回 RST 报文。Nmap 把它们标记为 unfiltered(未被过滤的)，意思是 ACK 报文不能到达，但至于它们是 open(开放的)或者 closed(关闭的) 无法确定。不响应的端口 或者发送特定的 ICMP 错误消息(类型 3，代号 1，2，3，9，10， 或者 13)的端口，标记为 filtered(被过滤的)。</p>
</li>
<li>
<p>-sW (TCP 窗口扫描)<br>
除了利用特定系统的实现细节来区分开放端口和关闭端口，当收到 RST 时不总是打印 unfiltered， 窗口扫描和 ACK 扫描完全一样。 它通过检查返回的 RST 报文的 TCP 窗口域做到这一点。 在某些系统上，开放端口用正数表示窗口大小(甚至对于 RST 报文) 而关闭端口的窗口大小为 0。因此，当收到 RST 时，窗口扫描不总是把端口标记为 unfiltered， 而是根据 TCP 窗口值是正数还是 0，分别把端口标记为 open 或者 closed<br>
该扫描依赖于互联网上少数系统的实现细节， 因此您不能永远相信它。不支持它的系统会通常返回所有端口 closed。 当然，一台机器没有开放端口也是有可能的。 如果大部分被扫描的端口是 closed，而一些常见的端口 (如 22， 25，53) 是 filtered，该系统就非常可疑了。 偶尔地，系统甚至会显示恰恰相反的行为。 如果您的扫描显示 1000 个开放的端口和 3 个关闭的或者被过滤的端口， 那么那 3 个很可能也是开放的端口。</p>
</li>
<li>
<p>-sM (TCP Maimon 扫描)<br>
Maimon 扫描是用它的发现者 Uriel Maimon 命名的。他在 Phrack Magazine issue #49 (November 1996)中描述了这一技术。 Nmap 在两期后加入了这一技术。 这项技术和 Null，FIN，以及 Xmas 扫描完全一样，除了探测报文是 FIN/ACK。 根据 RFC 793 (TCP)，无论端口开放或者关闭，都应该对这样的探测响应 RST 报文。 然而，Uriel 注意到如果端口开放，许多基于 BSD 的系统只是丢弃该探测报文。</p>
</li>
<li>
<p>--scanflags (定制的 TCP 扫描)<br>
真正的 Nmap 高级用户不需要被这些现成的扫描类型束缚。 --scanflags 选项允许您通过指定任意 TCP 标志位来设计您自己的扫描。 让您的创造力流动，躲开那些仅靠本手册添加规则的入侵检测系统！<br>
--scanflags 选项可以是一个数字标记值如 9 (PSH 和 FIN)， 但使用字符名更容易些。 只要是 URG， ACK，PSH， RST，SYN，and FIN 的任何组合就行。例如，--scanflags URGACKPSHRSTSYNFIN 设置了所有标志位，但是这对扫描没有太大用处。 标志位的顺序不重要。<br>
除了设置需要的标志位，您也可以设置 TCP 扫描类型(如-sA 或者-sF)。 那个基本类型告诉 Nmap 怎样解释响应。例如， SYN 扫描认为没有响应意味着 filtered 端口，而 FIN 扫描则认为是 open|filtered。 除了使用您指定的 TCP 标记位，Nmap 会和基本扫描类型一样工作。 如果您不指定基本类型，就使用 SYN 扫描。</p>
</li>
<li>
<p>-sI &lt;zombie host[:probeport]&gt; (Idlescan)<br>
这种高级的扫描方法允许对目标进行真正的 TCP 端口盲扫描 (意味着没有报文从您的真实 IP 地址发送到目标)。相反，side-channel 攻击 利用 zombie 主机上已知的 IP 分段 ID 序列生成算法来窥探目标上开放端口的信息。 IDS 系统将显示扫描来自您指定的 zombie 机(必须运行并且符合一定的标准)。 这种奇妙的扫描类型太复杂了，不能在此完全描述，所以我写一篇非正式的论文， 发布在 <a href="http://nmap.org/book/idlescan.html" target="_blank">http://nmap.org/book/idlescan.html</a>。<br>
除了极端隐蔽(由于它不从真实 IP 地址发送任何报文)， 该扫描类型可以建立机器间的基于 IP 的信任关系。 端口列表*从 zombie 主机的角度。*显示开放的端口。 因此您可以尝试用您认为(通过路由器/包过滤规则)可能被信任的 zombies 扫描目标。<br>
如果您由于 IPID 改变希望探测 zombie 上的特定端口， 您可以在 zombie 主机后加上一个冒号和端口号。 否则 Nmap 会使用默认端口(80)。</p>
</li>
<li>
<p>-sO (IP 协议扫描)<br>
IP 协议扫描可以让您确定目标机支持哪些 IP 协议 (TCP，ICMP，IGMP，等等)。从技术上说，这不是端口扫描 ，既然它遍历的是 IP 协议号而不是 TCP 或者 UDP 端口号。 但是它仍使用 -p 选项选择要扫描的协议号， 用正常的端口表格式报告结果，甚至用和真正的端口扫描一样 的扫描引擎。因此它和端口扫描非常接近，也被放在这里讨论。<br>
除了本身很有用，协议扫描还显示了开源软件的力量。 尽管基本想法非常简单，我过去从没想过增加这一功能也没收到任何对它的请求。 在 2000 年夏天，Gerhard Rieger 孕育了这个想法，写了一个很棒的补丁程序，发送到 nmap-hackers 邮件列表。 我把那个补丁加入了 Nmap，第二天发布了新版本。 几乎没有商业软件会有用户有足够的热情设计并贡献他们的改进。<br>
协议扫描以和 UDP 扫描类似的方式工作。它不是在 UDP 报文的端口域上循环， 而是在 IP 协议域的 8 位上循环，发送 IP 报文头。 报文头通常是空的，不包含数据，甚至不包含所申明的协议的正确报文头 TCP，UDP，和 ICMP 是三个例外。它们三个会使用正常的协议头，因为否则某些系 统拒绝发送，而且 Nmap 有函数创建它们。协议扫描不是注意 ICMP 端口不可到达消息， 而是 ICMP <em>协议</em>不可到达消息。如果 Nmap 从目标主机收到 任何协议的任何响应，Nmap 就把那个协议标记为 open。 ICMP 协议不可到达 错误(类型 3，代号 2) 导致协议被标记为 closed。其它 ICMP 不可到达协议(类型 3，代号 1，3，9，10，或者 13) 导致协议被标记为 filtered (虽然同时他们证明 ICMP 是 open )。如果重试之后仍没有收到响应， 该协议就被标记为 open|filtered</p>
</li>
<li>
<p>-b <ftp relay host> (FTP 弹跳扫描)<br>
FTP 协议的一个有趣特征(<a href="http://www.rfc-editor.org/rfc/rfc959.txt" target="_blank">RFC 959</a>) 是支持所谓代理 ftp 连接。它允许用户连接到一台 FTP 服务器，然后要求文件送到一台第三方服务器。 这个特性在很多层次上被滥用，所以许多服务器已经停止支持它了。其中一种就是导致 FTP 服务器对其它主机端口扫描。 只要请求 FTP 服务器轮流发送一个文件到目标主机上的所感兴趣的端口。 错误消息会描述端口是开放还是关闭的。 这是绕过防火墙的好方法，因为 FTP 服务器常常被置于可以访问比 Web 主机更多其它内部主机的位置。 Nmap 用-b 选项支持 ftp 弹跳扫描。参数格式是 <username>:<password>@<server>:<port>。 <server> 是某个脆弱的 FTP 服务器的名字或者 IP 地址。 您也许可以省略<username>:<password>， 如果服务器上开放了匿名用户(user:anonymous password:-wwwuser@)。 端口号(以及前面的冒号) 也可以省略，如果<server>使用默认的 FTP 端口(21)。<br>
当 Nmap1997 年发布时，这个弱点被广泛利用，但现在大部分已经被 fix 了。 脆弱的服务器仍然存在，所以如果其它都失败了，这也值得一试。 如果您的目标是绕过防火墙，扫描目标网络上的开放的 21 端口(或者 甚至任何 ftp 服务，如果您用版本探测扫描所有端口)， 然后对每个尝试弹跳扫描。Nmap 会告诉您该主机脆弱与否。 如果您只是试着玩 Nmap，您不必(事实上，不应该)限制您自己。 在您随机地在互联网上寻找脆弱的 FTP 服务器时，考虑一下系统管理员不太喜欢您这样滥用他们的服务器。</server></password></username></server></port></server></password></username></ftp></p>
</li>
</ul>
<h2 id="端口说明和扫描顺序">端口说明和扫描顺序</h2>
<p>除了所有前面讨论的扫描方法， Nmap 提供选项说明那些端口被扫描以及扫描是随机还是顺序进行。 默认情况下，Nmap 用指定的协议对端口 1 到 1024 以及 nmap-services 文件中列出的更高的端口在扫描。</p>
<ul>
<li>-p <port ranges> (只扫描指定的端口)<br>
该选项指明您想扫描的端口，覆盖默认值。 单个端口和用连字符表示的端口范围(如 1-1023)都可以。 范围的开始以及/或者结束值可以被省略， 分别导致 Nmap 使用 1 和 65535。所以您可以指定 -p-从端口 1 扫描到 65535。 如果您特别指定，也可以扫描端口 0。 对于 IP 协议扫描(-sO)，该选项指定您希望扫描的协议号 (0-255)。<br>
当既扫描 TCP 端口又扫描 UDP 端口时，您可以通过在端口号前加上 T: 或者 U:指定协议。 协议限定符一直有效您直到指定另一个。 例如，参数 -p U:53，111，137，T:21-25，80，139，8080 将扫描 UDP 端口 53，111，和 137，同时扫描列出的 TCP 端口。注意，要既扫描 UDP 又扫描 TCP，您必须指定 -sU ，以及至少一个 TCP 扫描类型(如 -sS，-sF，或者 -sT)。如果没有给定协议限定符， 端口号会被加到所有协议列表。</port></li>
<li>-F (快速 (有限的端口) 扫描)<br>
在 nmap 的 nmap-services 文件中(对于-sO，是协议文件)指定您想要扫描的端口。 这比扫描所有 65535 个端口快得多。 因为该列表包含如此多的 TCP 端口(1200 多)，这和默认的 TCP 扫描 scan (大约 1600 个端口)速度差别不是很大。如果您用--datadir 选项指定您自己的 小小的 nmap-services 文件 ，差别会很惊人。</li>
<li>-r (不要按随机顺序扫描端口)<br>
默认情况下，Nmap 按随机顺序扫描端口 (除了出于效率的考虑，常用的端口前移)。这种随机化通常都是受欢迎的， 但您也可以指定-r 来顺序端口扫描。</li>
</ul>
<h2 id="服务和版本探测">服务和版本探测</h2>
<p>把 Nmap 指向一个远程机器，它可能告诉您 端口 25/tcp，80/tcp，和 53/udp 是开放的。使用包含大约 2,200 个著名的服务的 nmap-services 数据库， Nmap 可以报告那些端口可能分别对应于一个邮件服务器 (SMTP)，Web 服务器(HTTP)，和域名服务器(DNS)。 这种查询通常是正确的 -- 事实上，绝大多数在 TCP 端口 25 监听的守护进程是邮件 服务器。然而，您不应该把赌注押在这上面！ 人们完全可以在一些奇怪的端口上运行服务。</p>
<p>即使 Nmap 是对的，假设运行服务的确实是 SMTP，HTTP 和 DNS，那也不是特别多的信息。  有一个精确的版本号对了解服务器有什么漏洞有巨大帮助。 版本探测可以帮您获得该信息。</p>
<p>在用某种其它类型的扫描方法发现 TCP 和/或者 UDP 端口后， 版本探测会询问这些端口，确定到底什么服务正在运行。 nmap-service-probes 数据库包含查询不同服务的探测报文 和解析识别响应的匹配表达式。 Nmap 试图确定服务协议 (如 ftp，SSH，telnet，http)，应用程序名(如 ISC Bind，Apache httpd，Solaris telnetd)，版本号， 主机名，设备类型(如 打印机，路由器)，操作系统家族 (如 Windows，Linux)以及其它的细节，如 如是否可以连接 X server，SSH 协议版本 ，或者 KaZaA 用户名)。当然，并非所有服务都提供所有这些信息。</p>
<ul>
<li>-sV (版本探测)<br>
打开版本探测。 您也可以用-A 同时打开操作系统探测和版本探测。</li>
<li>--allports (不为版本探测排除任何端口)<br>
默认情况下，Nmap 版本探测会跳过 9100 TCP 端口，因为一些打印机简单地打印送到该端口的 任何数据，这回导致数十页 HTTP get 请求，二进制 SSL 会话请求等等被打印出来。这一行为可以通过修改或删除 nmap-service-probes 中的 Exclude 指示符改变， 您也可以不理会任何 Exclude 指示符，指定--allports 扫描所有端口</li>
<li>--version-intensity <intensity> (设置 版本扫描强度)<br>
当进行版本扫描(-sV)时，nmap 发送一系列探测报文 ，每个报文都被赋予一个 1 到 9 之间的值。 被赋予较低值的探测报文对大范围的常见服务有效，而被赋予较高值的报文 一般没什么用。强度水平说明了应该使用哪些探测报文。数值越高， 服务越有可能被正确识别。 然而，高强度扫描花更多时间。强度值必须在 0 和 9 之间。 默认是 7。当探测报文通过 nmap-service-probes ports 指示符 注册到目标端口时，无论什么强度水平，探测报文都会被尝试。这保证了 DNS 探测将永远在任何开放的 53 端口尝试， SSL 探测将在 443 端口尝试，等等。</intensity></li>
<li>--version-light (打开轻量级模式)<br>
这是 --version-intensity 2 的方便的别名。轻量级模式使 版本扫描快许多，但它识别服务的可能性也略微小一点。</li>
<li>--version-all (尝试每个探测)<br>
--version-intensity 9 的别名， 保证对每个端口尝试每个探测报文。</li>
<li>--version-trace (跟踪版本扫描活动)<br>
这导致 Nmap 打印出详细的关于正在进行的扫描的调试信息。 它是您用--packet-trace 所得到的信息的子集。</li>
<li>-sR (RPC 扫描)<br>
这种方法和许多端口扫描方法联合使用。 它对所有被发现开放的 TCP/UDP 端口执行 SunRPC 程序 NULL 命令，来试图 确定它们是否 RPC 端口，如果是， 是什么程序和版本号。因此您可以有效地获得和 <strong>rpcinfo -p</strong> 一样的信息， 即使目标的端口映射在防火墙后面(或者被 TCP 包装器保护)。Decoys 目前不能和 RPC scan 一起工作。 这作为版本扫描(-sV)的一部分自动打开。 由于版本探测包括它并且全面得多，-sR 很少被需要。</li>
</ul>
<h2 id="操作系统探测">操作系统探测</h2>
<p>Nmap 最著名的功能之一是用 TCP/IP 协议栈 fingerprinting 进行远程操作系统探测。 Nmap 发送一系列 TCP 和 UDP 报文到远程主机，检查响应中的每一个比特。 在进行一打测试如 TCP ISN 采样，TCP 选项支持和排序，IPID 采样，和初始窗口大小检查之后， Nmap 把结果和数据库 nmap-os-fingerprints 中超过 1500 个已知的操作系统的 fingerprints 进行比较，如果有匹配，就打印出操作系统的详细信息。 每个 fingerprint 包括一个自由格式的关于 OS 的描述文本， 和一个分类信息，它提供供应商名称(如 Sun)，下面的操作系统(如 Solaris)，OS 版本(如 10)， 和设备类型(通用设备，路由器，switch，游戏控制台， 等)。</p>
<p>如果 Nmap 不能猜出操作系统，并且有些好的已知条件(如 至少发现了一个开放端口和一个关闭端口)，Nmap 会提供一个 URL，如果您确知运行的操作系统，您可以把 fingerprint 提交到那个 URL。 这样您就扩大了 Nmap 的操作系统知识库，从而让每个 Nmap 用户都受益。</p>
<p>操作系统检测可以进行其它一些测试，这些测试可以利用处理 过程中收集到的信息。例如运行时间检测，使用 TCP 时间戳选项(RFC 1323) 来估计主机上次重启的时间，这仅适用于提供这类信息的主机。另一种 是 TCP 序列号预测分类，用于测试针对远程主机建立一个伪造的 TCP 连接 的可能难度。这对于利用基于源 IP 地址的可信关系(rlogin，防火墙过滤等) 或者隐含源地址的攻击非常重要。这一类哄骗攻击现在很少见，但一些 主机仍然存在这方面的漏洞。实际的难度值基于统计采样，因此可能会有 一些波动。通常采用英国的分类较好，如“worthy challenge”或者 “trivial joke”。在详细模式(-v)下只以 普通的方式输出，如果同时使用-O，还报告 IPID 序列产生号。 很多主机的序列号是“增加”类别，即在每个发送包的 IP 头中 增加 ID 域值， 这对一些先进的信息收集和哄骗攻击来说是个漏洞。</p>
<p><a href="http://nmap.org/book/osdetect.html" target="_blank">http://nmap.org/book/osdetect.html</a> 文档使用多种语言描述了版本检测的方式、使用和定制。</p>
<p>采用下列选项启用和控制操作系统检测：</p>
<ul>
<li>-O (启用操作系统检测)<br>
也可以使用-A 来同时启用操作系统检测和版本检测。</li>
<li>--osscan-limit (针对指定的目标进行操作系统检测)<br>
如果发现一个打开和关闭的 TCP 端口时，操作系统检测会更有效。 采用这个选项，Nmap 只对满足这个条件的主机进行操作系统检测，这样可以 节约时间，特别在使用-P0 扫描多个主机时。这个选项仅在使用 -O 或-A 进行操作系统检测时起作用。</li>
<li>--osscan-guess; --fuzzy (推测操作系统检测结果)<br>
当 Nmap 无法确定所检测的操作系统时，会尽可能地提供最相近的匹配，Nmap 默认 进行这种匹配，使用上述任一个选项使得 Nmap 的推测更加有效。</li>
</ul>
<h2 id="时间和性能">时间和性能</h2>
<p>Nmap 开发的最高优先级是性能。在本地网络对一个主机的默认扫描(<strong>nmap <hostname></hostname></strong>)需要 1/5 秒。而仅仅眨眼的 时间，就需要扫描上万甚至几十万的主机。此外，一些特定的扫描选项会明显增 加扫描时间，如 UDP 扫描和版本检测。同样，防火墙配置以及特殊的响应速度限制也会 增加时间。Nmap 使用了并行算法和许多先进的算法来加速扫描，用户对 Nmap 如何 工作有最终的控制权。高级用户可以仔细地调整 Nmap 命令，在满足时间要求的同时获得他们所关心的信息。</p>
<p>改善扫描时间的技术有：忽略非关键的检测、升级最新版本的 Nmap(性能增强不断改善)。 优化时间参数也会带来实质性的变化，这些参数如下。</p>
<ul>
<li>--min-hostgroup <milliseconds>; --max-hostgroup <milliseconds> (调整并行扫描组的大小)<br>
Nmap 具有并行扫描多主机端口或版本的能力，Nmap 将多个目标 IP 地址 空间分成组，然后在同一时间对一个组进行扫描。通常，大的组更有效。缺 点是只有当整个组扫描结束后才会提供主机的扫描结果。如果组的大小定义 为 50，则只有当前 50 个主机扫描结束后才能得到报告(详细模式中的补充信息 除外)。默认方式下，Nmap 采取折衷的方法。开始扫描时的组较小， 最小为 5，这样便于尽快产生结果；随后增长组的大小，最大为 1024。确切的 大小依赖于所给定的选项。为保证效率，针对 UDP 或少量端口的 TCP 扫描，Nmap 使用大的组。--max-hostgroup 选项用于说明使用最大的组，Nmap 不 会超出这个大小。--min-hostgroup 选项说明最小的组，Nmap 会保持组大于这个值。如果在指定的接口上没有足够的目标主机来满足所 指定的最小值，Nmap 可能会采用比所指定的值小的组。这两个参数虽然很少使用， 但都用于保持组的大小在一个指定的范围之内。这些选项的主要用途是说明一个最小组的大小，使得整个扫描更加快速。通常 选择 256 来扫描 C 类网段。对于端口数较多的扫描，超出该值没有意义。对于 端口数较少的扫描，2048 或更大的组大小是有帮助的。</milliseconds></milliseconds></li>
<li>--min-parallelism <milliseconds>; --max-parallelism <milliseconds> (调整探测报文的并行度)<br>
这些选项控制用于主机组的探测报文数量，可用于端口扫描和主机发现。默认状态下， Nmap 基于网络性能计算一个理想的并行度，这个值经常改变。如果报文被丢弃， Nmap 降低速度，探测报文数量减少。随着网络性能的改善，理想的探测报文数量会缓慢增加。 这些选项确定这个变量的大小范围。默认状态下，当网络不可靠时，理想的并行度值 可能为 1，在好的条件下，可能会增长至几百。最常见的应用是--min-parallelism 值大于 1，以加快 性能不佳的主机或网络的扫描。这个选项具有风险，如果过高则影响准确度，同时 也会降低 Nmap 基于网络条件动态控制并行度的能力。这个值设为 10 较为合适， 这个值的调整往往作为最后的手段。--max-parallelism 选项通常设为 1，以防止 Nmap 在同一时间 向主机发送多个探测报文，和选择--scan-delay 同时使用非常有用，虽然 这个选项本身的用途已经很好。</milliseconds></milliseconds></li>
<li>--min-rtt-timeout <milliseconds>， --max-rtt-timeout <milliseconds>， --initial-rtt-timeout <milliseconds> (调整探测报文超时)<br>
Nmap 使用一个运行超时值来确定等待探测报文响应的时间，随后会放弃或重新 发送探测报文。Nmap 基于上一个探测报文的响应时间来计算超时值，如果网络延迟比较显著 和不定，这个超时值会增加几秒。初始值的比较保守(高)，而当 Nmap 扫描无响应 的主机时，这个保守值会保持一段时间。这些选项以毫秒为单位，采用小的--max-rtt-timeout 值，使 --initial-rtt-timeout 值大于默认值可以明显减少扫描时间，特别 是对不能 ping 通的扫描(-P0)以及具有严格过滤的网络。如果使用太 小的值，使得很多探测报文超时从而重新发送，而此时可能响应消息正在发送，这使得整个扫描的时 间会增加。如果所有的主机都在本地网络，对于--max-rtt-timeout 值来 说，100 毫秒比较合适。如果存在路由，首先使用 ICMP ping 工具 ping 主机，或使用其 它报文工具如 hpings，可以更好地穿透防火墙。查看大约 10 个包的最大往返时间，然后将 --initial-rtt-timeout 设成这个时间的 2 倍，--max-rtt-timeout 可设成这个时间值的 3 倍或 4 倍。通常，不管 ping 的时间是多少，最大的 rtt 值不得小于 100ms， 不能超过 1000ms。--min-rtt-timeout 这个选项很少使用，当网络不可靠时， Nmap 的默认值也显得过于强烈，这时这个选项可起作用。当网络看起来不可靠时，Nmap 仅将 超时时间降至最小值，这个情况是不正常的，需要向 nmap-dev 邮件列表报告 bug。</milliseconds></milliseconds></milliseconds></li>
<li>--host-timeout <milliseconds> (放弃低速目标主机)<br>
由于性能较差或不可靠的网络硬件或软件、带宽限制、严格的防火墙等原因， 一些主机需要<em>很长</em>的时间扫描。这些极少数的主机扫描往往占 据了大部分的扫描时间。因此，最好的办法是减少时间消耗并且忽略这些主机，使用 --host-timeout 选项来说明等待的时间(毫秒)。通常使用 1800000 来保证 Nmap 不会在单个主机上使用超过半小时的时间。需要注意的是，Nmap 在这半小时中可以 同时扫描其它主机，因此并不是完全放弃扫描。超时的主机被忽略，因此也没有针对该主机的 端口表、操作系统检测或版本检测结果的输出。</milliseconds></li>
<li>--scan-delay <milliseconds>; --max-scan-delay <milliseconds> (调整探测报文的时间间隔)<br>
这个选项用于 Nmap 控制针对一个主机发送探测报文的等待时间(毫秒)，在带宽 控制的情况下这个选项非常有效。Solaris 主机在响应 UDP 扫描探测报文报文时，每秒 只发送一个 ICMP 消息，因此 Nmap 发送的很多数探测报文是浪费的。--scan-delay 设为 1000，使 Nmap 低速运行。Nmap 尝试检测带宽控制并相应地调整扫描的延迟，但 并不影响明确说明何种速度工作最佳。--scan-delay 的另一个用途是躲闭基于阈值的入侵检测和预防 系统(IDS/IPS)。</milliseconds></milliseconds></li>
<li>-T &lt;Paranoid|Sneaky|Polite|Normal|Aggressive|Insane&gt; (设置时间模板)<br>
上述优化时间控制选项的功能很强大也很有效，但有些用户会被迷惑。此外， 往往选择合适参数的时间超过了所需优化的扫描时间。因此，Nmap 提供了一些简单的 方法，使用 6 个时间模板，使用时采用-T 选项及数字(0 - 5) 或名称。模板名称有 paranoid (0)、sneaky (1)、polite (2)、normal(3)、 aggressive (4)和 insane (5)。前两种模式用于 IDS 躲避，Polite 模式降低了扫描 速度以使用更少的带宽和目标主机资源。默认模式为 Normal，因此-T3 实际上是未做任何优化。Aggressive 模式假设用户具有合适及可靠的网络从而加速 扫描。Insane 模式假设用户具有特别快的网络或者愿意为获得速度而牺牲准确性。用户可以根据自己的需要选择不同的模板，由 Nmap 负责选择实际的时间值。 模板也会针对其它的优化控制选项进行速度微调。例如，-T4 针对 TCP 端口禁止动态扫描延迟超过 10ms，-T5 对应的值为 5ms。 模板可以和优化调整控制选项组合使用，但模板必须首先指定，否则模板的标准值 会覆盖用户指定的值。建议在扫描可靠的网络时使用 -T4，即使 在自己要增加优化控制选项时也使用(在命令行的开始)，从而从这些额外的较小的优化 中获益。如果用于有足够的带宽或以太网连接，仍然建议使用-T4 选项。 有些用户喜欢-T5 选项，但这个过于强烈。有时用户考虑到避免使主机 崩溃或者希望更礼貌一些会采用-T2 选项。他们并没意识到-T Polite 选项是如何的慢，这种模式的扫描比默认方式实际上要多花 10 倍的时间。默认时间 选项(-T3)很少有主机崩溃和带宽问题，比较适合于谨慎的用户。不进行 版本检测比进行时间调整能更有效地解决这些问题。虽然-T0 和-T1 选项可能有助于避免 IDS 告警，但 在进行上千个主机或端口扫描时，会显著增加时间。对于这种长时间的扫描，宁可设定确切的时间 值，而不要去依赖封装的-T0 和-T1 选项。T0 选项的主要影响是对于连续扫描，在一个时间只能扫描一个端口， 每个探测报文的发送间隔为 5 分钟。T1 和 T2 选项比较类似， 探测报文间隔分别为 15 秒和 0.4 秒。T3 是 Nmap 的默认选项，包含了并行扫描。 T4 选项与 --max-rtt-timeout 1250 --initial-rtt-timeout 500 等价，最大 TCP 扫描延迟为 10ms。T5 等价于 --max-rtt-timeout 300 --min-rtt-timeout 50 --initial-rtt-timeout 250 --host-timeout 900000，最大 TCP 扫描延迟为 5ms。</li>
</ul>
<h2 id="防火墙-IDS躲避和哄骗">防火墙/IDS 躲避和哄骗</h2>
<p>在 90 年代早期，各种机构开始部 署防火墙来实现减少连接的目的，大型网络通过代理、NAT 和包过滤器与未 过滤的 Internet 隔离。不受限的信息流被严格控制的可信通信通道信息流所替代。</p>
<p>类似防火墙的网络隔离使得对网络的搜索更加困难，随意的搜 索变得不再简单。然而，Nmap 提供了很多特性用于理解这些复杂的网 络，并且检验这些过滤器是否正常工作。此外，Nmap 提供了绕过某些较弱的 防范机制的手段。检验网络安全状态最有效的方法之一是尝试哄骗网络，将 自己想象成一个攻击者，使用本节提供的技术来攻击自己的网络。如使用 FTP bounce 扫描、Idle 扫描、分片攻击或尝试穿透自己的代理。</p>
<p>除限止网络的行为外，使用入侵检测系统(IDS)的公司也不断增加。由于 Nmap 常用于攻击前期的扫描，因此所有主流的 IDS 都包含了检测 Nmap 扫描的规则。 现在，这些产品变形为入侵<em>预防</em>系统(IPS)，可以主 动地阻止可疑的恶意行为。不幸的是，网络管理员和 IDS 厂商通过分析报文 来检测恶意行为是一个艰苦的工作，有耐心和技术的攻击者，在特定 Nmap 选项 的帮助下，常常可以不被 IDS 检测到。</p>
<p>Nmap 不提供检测和破坏防火墙及 IDS 系统的魔弹(或 Nmap 选项)，它使用 的是技术和经验，这超出了本参考手册的范围，下面描述了相关的选项和 完成的工作。</p>
<ul>
<li>-f (报文分段); --mtu (使用指定的 MTU)<br>
-f 选项要求扫描时(包挺 ping 扫描)使用 小的 IP 包分段。其思路是将 TCP 头分段在几个包中，使得包过滤器、 IDS 以及其它工具的检测更加困难。必须小心使用这个选项，有些系 统在处理这些小包时存在问题，例如旧的网络嗅探器 Sniffit 在接收 到第一个分段时会立刻出现分段错误。该选项使用一次，Nmap 在 IP 头后将包分成 8 个字节或更小。因此，一个 20 字节的 TCP 头会被分成 3 个 包，其中 2 个包分别有 TCP 头的 8 个字节，另 1 个包有 TCP 头的剩下 4 个字 节。当然，每个包都有一个 IP 头。再次使用-f 可使用 16 字节的分段(减少分段数量)。使用--mtu 选项可 以自定义偏移的大小，使用时不需要-f，偏移量必须 是 8 的倍数。包过滤器和防火墙对所有的 IP 分段排队，如 Linux 核心中的 CONFIG-IP-ALWAYS-DEFRAG 配置项，分段包不会直接使用。一些网络无法 承受这样所带来的性能冲击，会将这个配置禁止。其它禁止的原因有分段 包会通过不同的路由进入网络。一些源系统在内核中对发送的报文进行 分段，使用 iptables 连接跟踪模块的 Linux 就是一个例子。当使用类似 Ethereal 的嗅探器时，扫描必须保证发送的报文要分段。如果主机操作系统会产 生问题，尝试使用--send-eth 选项以避开 IP 层而直接 发送原始的以太网帧。</li>
<li>-D &lt;decoy1 [，decoy2][，ME]，...&gt; (使用诱饵隐蔽扫描)<br>
为使诱饵扫描起作用，需要使远程主机认为是诱饵在扫描目标网络。 IDS 可能会报个某个 IP 的 5-10 个端口扫描，但并不知道哪个 IP 在扫描以及 哪些不是诱饵。但这种方式可以通过路由跟踪、响应丢弃以及其它主动 机制在解决。这是一种常用的隐藏自身 IP 地址的有效技术。使用逗号分隔每个诱饵主机，也可用自己的真实 IP 作为诱饵，这时可使用 ME 选项说明。如果在第 6 个位置或 更后的位置使用 ME 选项，一些常用 端口扫描检测器(如 Solar Designer's excellent scanlogd)就不会报告 这个真实 IP。如果不使用 ME 选项，Nmap 将真实 IP 放在一个随机的位置注意，作为诱饵的主机须在工作状态，否则会导致目标主机的 SYN 洪水攻击。 如果在网络中只有一个主机在工作，那就很容易确定哪个主机在扫描。也可 使用 IP 地址代替主机名(被诱骗的网络就不可能在名字服务器日志中发现)。诱饵可用在初始的 ping 扫描(ICMP、SYN、ACK 等)阶段或真正的端口扫描 阶段。诱饵也可以用于远程操作系统检测(-O)。在进行版 本检测或 TCP 连接扫描时，诱饵无效。使用过多的诱饵没有任何价值，反而导致扫描变慢并且结果不准确。 此外，一些 ISP 会过滤哄骗的报文，但很多对欺骗 IP 包没有任何限制。</li>
<li>-S &lt;IP_Address&gt; (源地址哄骗)<br>
在某些情况下，Nmap 可能无法确定你的源地址(如果这样，Nmap 会给出 提示)。此时，使用-S 选项并说明所需发送包的接口 IP 地址。这个标志的另一个用处是哄骗性的扫描，使得目标认为是<em>另 一个地址</em>在进行扫描。可以想象某一个竞争对手在不断扫描某个公司！ -e 选项常在这种情况下使用，也可采用-P0 选项。</li>
<li>-e <interface> (使用指定的接口)<br>
告诉 Nmap 使用哪个接口发送和接收报文，Nmap 可以进行自动检测， 如果检测不出会给出提示。</interface></li>
<li>--source-port <portnumber>; -g <portnumber> (源端口哄骗)<br>
仅依赖于源端口号就信任数据流是一种常见的错误配置，这个问题非常 好理解。例如一个管理员部署了一个新的防火墙，但招来了很多用户的不满，因为 他们的应用停止工作了。可能是由于外部的 UDP DNS 服务器响应无法进入网络，而导致 DNS 的崩溃。FTP 是另一个常见的例子，在 FTP 传输时，远程服务器尝试和内部用 建立连接以传输数据。对这些问题有安全解决方案，通常是应用级代理或协议分析防火墙模块。 但也存在一些不安全的方案。注意到 DNS 响应来自于 53 端口，FTP 连接 来自于 20 端口，很多管理员会掉入一个陷阱，即允许来自于这些端口的数据进入 网络。他们认为这些端口里不会有值得注意的攻击和漏洞利用。此外，管理员 或许认为这是一个短期的措施，直至他们采取更安全的方案。但他们忽视了安全的 升级。不仅仅是工作量过多的网络管理员掉入这种陷阱，很多产品本身也会有这类 不安全的隐患，甚至是微软的产品。Windows 2000 和 Windows XP 中包含的 IPsec 过滤 器也包含了一些隐含规则，允许所有来自 88 端口(Kerberos)的 TCP 和 UDP 数据流。另 一个常见的例子是 Zone Alarm 个人防火墙到 2.1.25 版本仍然允许源端口 53(DNS)或 67(DHCP)的 UDP 包进入。Nmap 提供了-g 和--source-port 选项(它们是 等价的)，用于利用上述弱点。只需要提供一个端口号，Nmap 就可以从这些 端口发送数据。为使特定的操作系统正常工作，Nmap 必须使用不同的端口号。 DNS 请求会忽略--source-port 选项，这是因为 Nmap 依靠系 统库来处理。大部分 TCP 扫描，包括 SYN 扫描，可以完全支持这些选项，UDP 扫 描同样如此。</portnumber></portnumber></li>
<li>--data-length <number> (发送报文时 附加随机数据)<br>
正常情况下，Nmap 发送最少的报文，只含一个包头。因此 TCP 包通常 是 40 字节，ICMP ECHO 请求只有 28 字节。这个选项告诉 Nmap 在发送的报文上 附加指定数量的随机字节。操作系统检测(-O)包不受影响， 但大部分 ping 和端口扫描包受影响，这会使处理变慢，但对扫描的影响较小。</number></li>
<li>--ttl <value> (设置 IP time-to-live 域)<br>
设置 IPv4 报文的 time-to-live 域为指定的值。</value></li>
<li>--randomize-hosts (对目标主机的顺序随机排列)<br>
告诉 Nmap 在扫描主机前对每个组中的主机随机排列，最多可达 8096 个主机。这会使得扫描针对不同的网络监控系统来说变得不是很 明显，特别是配合值较小的时间选项时更有效。如果需要对一个较大 的组进行随机排列，需要增大 nmap.h 文件中 PING-GROUP-SZ 的值，并重新编译。另一种方法是使用列表扫描 (-sL -n -oN <filename>)，产生目标 IP 的列表， 使用 Perl 脚本进行随机化，然后使用-iL 提供给 Nmap。</filename></li>
<li>--spoof-mac &lt;mac address，prefix，or vendor name&gt; (MAC 地址哄骗)<br>
要求 Nmap 在发送原以太网帧时使用指定的 MAC 地址，这个选项隐含了 --send-eth 选项，以保证 Nmap 真正发送以太网包。MAC 地址有几 种格式。如果简单地使用字符串“0”，Nmap 选择一个完全随机的 MAC 地址。如果给定的字符品是一个 16 进制偶数(使用：分隔)，Nmap 将使用这个 MAC 地址。 如果是小于 12 的 16 进制数字，Nmap 会随机填充剩下的 6 个字节。如果参数不是 0 或 16 进 制字符串，Nmap 将通过 nmap-mac-prefixes 查找 厂商的名称(大小写区分)，如果找到匹配，Nmap 将使用厂商的 OUI(3 字节前缀)，然后 随机填充剩余的 3 个节字。正确的--spoof-mac 参数有， Apple， 0，01:02:03:04:05:06， deadbeefcafe，0020F2， 和 Cisco.</li>
</ul>
<h2 id="输出">输出</h2>
<p>任何安全工具只有在输出结果时才是有价值的，如果没有通过组织和易于理解的方式来表达，复杂的测试和算法几乎没有意义。Nmap 提供了一些 方式供用户和其它软件使用，实际上，没有一种方式可以使所有人满意。 因此 Nmap 提供了一些格式，包含了方便直接查看的交互方式和方便软件处理 的 XML 格式。</p>
<p>除了提供输出格式外，Nmap 还提供了选项来控制输出的细节以及调试 信息。输出内容可发送给标准输出或命名文件，可以追加或覆盖。输出文件还可 被用于继续中断的扫描。</p>
<p>Nmap 提供 5 种不同的输出格式。默认的方式是 interactive output， 发送给标准输出(stdout)。normal output 方式类似于 interactive，但显示较少的运行时间信息 和告警信息，这是由于这些信息是在扫描完全结束后用于分析，而不是交互式的。</p>
<p>XML 输出是最重要的输出类型，可被转换成 HTML，对于程序处理非常方便， 如用于 Nmap 图形用户接口或导入数据库。</p>
<p>另两种输出类型比较简单，grepable output 格式，在一行中包含目标主机最多的信息；sCRiPt KiDDi3 0utPUt 格式，用于考虑自己的用户 |&lt;-r4d。</p>
<p>交互式输出是默认方式，没有相应的命令行选项，其它四种格式选项 使用相同的语法，采用一个参数，即存放结果的文件名。多种格式可同时 使用，但一种格式只能使用一次。例如，在标准输出用于查看的同时，可将结 果保存到 XML 文件用于程序分析，这时可以使用选项-oX myscan.xml -oN myscan.nmap。 为便于描述的简化，本章使用类似于 myscan.xml 的简单文件名， 建议采用更具有描述性的文件名。文件名的选择与个人喜好有关，建议增加 扫描日期以及一到两个单词来描述，并放置于一个目录中。</p>
<p>在将结果输出到文件的同时，Nmap 仍将结果发送给标准输出。例如， 命令 <strong>nmap -oX myscan.xml target</strong> 将 输出 XML 至 myscan.xml，并在 stdout 上打印相同的交互式结果，而此时-oX 选项没有采用。可以 使用连字符作为选项来改变，这使得 Nmap 禁止交互式输出，而是将结果打印到 所指定的标准输出流中。因此，命令 <strong>nmap -oX - target</strong> 只 输出 XML 至标准输出 stdout。严重错误仍然是输出到标准错误流 stderr 中。</p>
<p>与其它 Nmap 参数不同，日志文件选项的空格(如-oX)和 文件名或连字符是必需的。如果省略了标记，例如-oG-或 -oXscan.xml，Nmap 的向后兼容特点将建立 <em>标准格式</em>的输出文件，相应的文件名为 G-和 Xscan.xml。</p>
<p>Nmap 还提供了控制扫描细节以及输出文件的添加或覆盖的选项，这些选项 如下所述。</p>
<p><strong>Nmap 输出格式</strong></p>
<ul>
<li>-oN <filespec> (标准输出)<br>
要求将标准输出直接写入指定 的文件。如上所述，这个格式与交互式输出 略有不同。</filespec></li>
<li>-oX <filespec> (XML 输出)<br>
要求 XML 输出直接写入指定 的文件。Nmap 包含了一个文档类型定义(DTD)，使 XML 解析器有效地 进行 XML 输出。这主要是为了程序应用，同时也可以协助人工解释 Nmap 的 XML 输出。DTD 定义了合法的格式元素，列举可使用的属性和 值。最新的版本可在 <a href="http://www.insecure.org/nmap/data/nmap.dtd" target="_blank">http://www.insecure.org/nmap/data/nmap.dtd</a> 获取。XML 提供了可供软件解析的稳定格式输出，主要的计算机 语言都提供了免费的 XML 解析器，如 C/C++，Perl，Python 和 Java。 针对这些语言有一些捆绑代码用于处理 Nmap 的输出和特定的执行程序。 例如 perl CPAN 中的 <a href="http://sourceforge.net/projects/nmap-scanner/" target="_blank">Nmap::Scanner</a> 和 <a href="http://www.nmapparser.com/" target="_blank">Nmap::Parser</a>。 对几乎所有与 Nmap 有接口的主要应用来说，XML 是首选的格式。XML 输出引用了一个 XSL 样式表，用于格式化输出结果，类似于 HTML。最方便的方法是将 XML 输出加载到一个 Web 浏览器，如 Firefox 或 IE。由于 nmap.xsl 文件的绝对 路径，因此通常只能在运行了 Nmap 的机器上工作(或类似配置的机器)。 类似于任何支持 Web 机器的 HTML 文件，--stylesheet 选项可用于建立可移植的 XML 文件。</filespec></li>
<li>-oS <filespec> (ScRipT KIdd|3 oUTpuT)<br>
脚本小子输出类似于交互工具输出，这是一个事后处理，适合于 'l33t HaXXorZ， 由于原来全都是大写的 Nmap 输出。这个选项和脚本小子开了玩笑，看上去似乎是为了 “帮助他们”。</filespec></li>
<li>-oG <filespec> (Grep 输出)<br>
这种方式最后介绍，因为不建议使用。XML 输格式很强大，便于有经验 的用户使用。XML 是一种标准，由许多解析器构成，而 Grep 输届更简化。XML 是可扩展的，以支持新发布的 Nmap 特点。使用 Grep 输出的目的是忽略这些 特点，因为没有足够的空间。然面，Grep 输出仍然很常使用。它是一种简单格式，每行一个主机，可以 通过 UNIX 工具(如 grep、awk、cut、sed、diff)和 Perl 方便地查找和分解。常可 用于在命令行上进行一次性测式。查找 SSH 端口打开或运行 Sloaris 的主机，只需 要一个简单的 grep 主机说明，使用通道并通过 awk 或 cut 命令打印所需的域。Grep 输出可以包含注释(每行由 # 号开始)。每行由 6 个标记的域组成，由制表符及 冒号分隔。这些域有主机，端口， 协议，忽略状态， 操作系统，序列号， IPID 和状态。这些域中最重要的是 Ports，它提供 了所关注的端口的细节，端口项由逗号分隔。每个端口项代表一个所关注的端口， 每个子域由/分隔。这些子域有：端口号， 状态，协议， 拥有者，服务， SunRPCinfo 和版本信息。对于 XML 输出，本手册无法列举所有的格式，有关 Nmap Grep 输出的更详细信息可 查阅 <a href="http://www.unspecific.com/nmap-oG-output" target="_blank">http://www.unspecific.com/nmap-oG-output</a>。</filespec></li>
<li>-oA <basename> (输出至所有格式)<br>
为使用方便，利用-oA<basename>选项 可将扫描结果以标准格式、XML 格式和 Grep 格式一次性输出。分别存放在 <basename>.nmap，<basename>.xml 和 <basename>.gnmap 文件中。也可以在文件名前 指定目录名，如在 UNIX 中，使用~/nmaplogs/foocorp/， 在 Window 中，使用 c:\hacking\sco on Windows。</basename></basename></basename></basename></basename></li>
</ul>
<p><strong>细节和调试选项</strong></p>
<ul>
<li>-v (提高输出信息的详细度)<br>
通过提高详细度，Nmap 可以输出扫描过程的更多信息。 输出发现的打开端口，若 Nmap 认为扫描需要更多时间会显示估计 的结束时间。这个选项使用两次，会提供更详细的信息。这个选 项使用两次以上不起作用。大部分的变化仅影响交互式输出，也有一些影响标准和脚本 小子输出。其它输出类型由机器处理，此时 Nmap 默认提供详细的信 息，不需要人工干预。然而，其它模式也会有一些变化，省略一些 细节可以减小输出大小。例如，Grep 输出中的注释行提供所有扫描 端口列表，但由于这些信息过长，因此只能在细节模式中输出。</li>
<li>-d [level] (提高或设置调试级别)<br>
当详细模式也不能为用户提供足够的数据时，使用调试可以得到更 多的信息。使用细节选项(-v)时，可启用命令行参数 (-d)，多次使用可提高调试级别。也可在-d 后面使用参数设置调试级别。例如，-d9 设定级别 9。这是 最高的级别，将会产生上千行的输出，除非只对很少的端口和目标进行简单扫描。如果 Nmap 因为 Bug 而挂起或者对 Nmap 的工作及原理有疑问，调试输出 非常有效。主要是开发人员用这个选项，调试行不具备自我解释的特点。 例如，Timeoutvals: srtt: -1 rttvar: -1 to: 1000000 delta 14987 ==&gt; srtt: 14987 rttvar: 14987 to: 100000。如果对某行输出不明白， 可以忽略、查看源代码或向开发列表(nmap-dev)求助。有些输出行会有自 我解释的特点，但随着调试级别的升高，会越来越含糊。</li>
<li>--packet-trace (跟踪发送和接收的报文)<br>
要求 Nmap 打印发送和接收的每个报文的摘要，通常用于 调试，有助于新用户更好地理解 Nmap 的真正工作。为避免输出过 多的行，可以限制扫描的端口数，如-p20-30。 如果只需进行版本检测，使用--version-trace。</li>
<li>--iflist (列举接口和路由)<br>
输出 Nmap 检测到的接口列表和系统路由，用于调试路由 问题或设备描述失误(如 Nmap 把 PPP 连接当作以太网对待)。</li>
</ul>
<p><strong>其它输出选项</strong></p>
<ul>
<li>--append-output (在输出文件中添加)<br>
当使用文件作为输出格式，如-oX 或-oN， 默认该文件被覆盖。如果希望文件保留现有内容，将结果添加在现 有文件后面，使用--append-output 选项。所有指 定的输出文件都被添加。但对于 XML(-oX)扫描输出 文件无效，无法正常解析，需要手工修改。</li>
<li>--resume <filename> (继续中断的扫描)<br>
一些扩展的 Nmap 运行需要很长的时间 -- 以天计算，这类扫描 往往不会结束。可以进行一些限制，禁止 Nmap 在工作时间运行，导致 网络中断、运行 Nmap 的主机计划或非计划地重启、或者 Nmap 自己中断。 运行 Nmap 的管理员可以因其它原因取消运行，按下 <strong>ctrl-C</strong> 即可。从头开始启动扫描可能令人不快，幸运的是，如果标准扫描 (-oN)或 Grep 扫描(-oG)日志 被保留，用户可以要求 Nmap 恢复终止的扫描，只需要简单地使用选项 --resume 并说明标准/Grep 扫描输出文件，不允许 使用其它参数，Nmap 会解析输出文件并使用原来的格式输出。使用方式 如 <strong>nmap --resume <logfilename></logfilename></strong>。 Nmap 将把新地结果添加到文件中，这种方式不支持 XML 输出格式，原因是 将两次运行结果合并至一个 XML 文件比较困难。</filename></li>
<li>--stylesheet <path or url> (设置 XSL 样式表，转换 XML 输出)<br>
Nmap 提从了 XSL 样式表 nmap.xsl，用于查看 或转换 XML 输出至 HTML。XML 输出包含了一个 xml-stylesheet， 直接指向 nmap.xml 文件， 该文件由 Nmap 安装(或位于 Windows 当前工作目录)。在 Web 浏览器 中打开 Nmap 的 XML 输出时，将会在文件系统中寻找 nmap.xsl 文件， 并使用它输出结果。如果希望使用不同的样式表，将它作为 --stylesheet 的参数，必段指明完整的路 径或 URL，常见的调用方式是--stylesheet <a href="http://www.insecure.org/nmap/data/nmap.xsl" target="_blank">http://www.insecure.org/nmap/data/nmap.xsl</a>。 这告诉浏览器从 Insecire.Org 中加载最新的样式表。这使得 没安装 Nmap(和 nmap.xsl) 的机器中可以方便地查看结果。因此，URL 更方便使用，本地文件系统 的 nmap.xsl 用于默认方式。</path></li>
<li>--no-stylesheet (忽略 XML 声明的 XSL 样式表)<br>
使用该选项禁止 Nmap 的 XML 输出关联任何 XSL 样式表。 xml-stylesheet 指示被忽略。</li>
</ul>
<h2 id="其它选项">其它选项</h2>
<p>本节描述一些重要的(和并不重要)的选项，这些选项 不适合其它任何地方。</p>
<ul>
<li>-6 (启用 IPv6 扫描)<br>
从 2002 年起，Nmap 提供对 IPv6 的一些主要特征的支持。ping 扫描(TCP-only)、 连接扫描以及版本检测都支持 IPv6。除增加-6 选项外， 其它命令语法相同。当然，必须使用 IPv6 地址来替换主机名，如 3ffe:7501:4819:2000:210:f3ff:fe03:14d0。 除“所关注的端口”行的地址部分为 IPv6 地址。IPv6 目前未在全球广泛采用，目前在一些国家(亚洲)应用较多， 一些高级操作系统支持 IPv6。使用 Nmap 的 IPv6 功能，扫描的源和目 的都需要配置 IPv6。如果 ISP(大部分)不分配 IPv6 地址，Nmap 可以采用 免费的隧道代理。一种较好的选择是 BT Exact，位于 <a href="https://tb.ipv6.btexact.com/" target="_blank">https://tb.ipv6.btexact.com/</a>。 此外，还有 Hurricane Electric，位于 <a href="http://ipv6tb.he.net/" target="_blank">http://ipv6tb.he.net/</a>。6to4 隧道是 另一种常用的免费方法。</li>
<li>-A (激烈扫描模式选项)<br>
这个选项启用额外的高级和高强度选项，目前还未确定代表 的内容。目前，这个选项启用了操作系统检测(-O) 和版本扫描(-sV)，以后会增加更多的功能。 目的是启用一个全面的扫描选项集合，不需要用户记忆大量的 选项。这个选项仅仅启用功能，不包含用于可能所需要的 时间选项(如-T4)或细节选项(-v)。</li>
<li>--datadir <directoryname> (说明用户 Nmap 数据文件位置)<br>
Nmap 在运行时从文件中获得特殊的数据，这些文件有 nmap-service-probes， nmap-services， nmap-protocols， nmap-rpc， nmap-mac-prefixes 和 nmap-os-fingerprints。Nmap 首先 在--datadir 选项说明的目录中查找这些文件。 未找到的文件，将在 BMAPDIR 环境变量说明的目录中查找。 接下来是用于真正和有效 UID 的~/.nmap 或 Nmap 可执行代码的位置(仅 Win32)；然后是是编译位置， 如/usr/local/share/nmap 或/usr/share/nmap。 Nmap 查找的最后一个位置是当前目录。</directoryname></li>
<li>--send-eth (使用原以太网帧发送)<br>
要求 Nmap 在以太网(数据链路)层而不是 IP(网络层)发送 报文。默认方式下，Nmap 选择最适合其运行平台的方式，原套接 字(IP 层)是 UNIX 主机最有效的方式，而以太网帧最适合 Windows 操作 系统，因为 Microsoft 禁用了原套接字支持。在 UNIX 中，如果没有其 它选择(如无以太网连接)，不管是否有该选项，Nmap 都使用原 IP 包。</li>
<li>--send-ip (在原 IP 层发送)<br>
要求 Nmap 通过原 IP 套接字发送报文，而不是低层的以 太网帧。这是--send-eth 选项的补充。</li>
<li>--privileged (假定用户具有全部权限)<br>
告诉 Nmap 假定其具有足够的权限进行源套接字包发送、 报文捕获和类似 UNIX 系统中根用户操作的权限。默认状态下， 如果由 getuid()请求的类似操作不为 0，Nmap 将退出。 --privileged 在具有 Linux 内核性能的类似 系统中使用非常有效，这些系统配置允许非特权用户可以进行 原报文扫描。需要明确的是，在其它选项之前使用这些需要权 限的选项(SYN 扫描、操作系统检测等)。Nmap-PRIVILEGED 变量 设置等价于--privileged 选项。</li>
<li>--interactive (在交互模式中启动)<br>
在交互模式中启动 Nmap，提供交互式的 Nmap 提示，便于 进行多个扫描(同步或后台方式)。对于从多用户系统中扫描 的用户非常有效，这些用户常需要测试他们的安全性，但不希望 系统中的其它用户知道他们扫描哪些系统。使用--interactive 激活这种方式，然后输入 <strong>h</strong> 可 获得帮助信息。由于需要对正确的 shell 程序和整个功能非常熟悉， 这个选项很少使用。这个选项包含了一个！操作符，用于执行 shell 命令， 这是不安装 Nmap setuid root 的多个原因之一。</li>
<li>-V; --version (打印版本信息)<br>
打印 Nmap 版本号并退出。</li>
<li>-h; --help (打印帮助摘要面)<br>
打印一个短的帮助屏幕，列出大部分常用的 命令选项，这个功能与不带参数运行 Nmap 是相同的。</li>
</ul>
<h2 id="实例">实例</h2>
<p>下面给出一些实例，简单的、复杂的到深奥的。为更具体，一 些例子使用了实际的 IP 地址和域名。在这些位置，可以使用<em>你自己网络</em> 的地址/域名替换。注意，扫描其它网络不一定合法，一些网络管理员不愿看到 未申请过的扫描，会产生报怨。因此，先获得允许是最好的办法。</p>
<p>如果是为了测试，scanme.nmap.org 允许被扫描。但仅允许使用 Nmap 扫描并禁止测试漏洞或进行 DoS 攻击。为 保证带宽，对该主机的扫描每天不要超过 12 次。如果这个免费扫描服务被 滥用，系统将崩溃而且 Nmap 将报告解析 指定的主机名/IP 地址失败：scanme.nmap.org。这些免 费扫描要求也适用于 scanme2.nmap.org、 scanme3.nmap.org 等等，虽然这些 主机目前还不存在。</p>
<p><strong>nmap -v scanme.nmap.org</strong></p>
<p>这个选项扫描主机 scanme.nmap.org 中 所有的保留 TCP 端口。选项-v 启用细节模式。</p>
<p><strong>nmap -sS -O scanme.nmap.org/24</strong></p>
<p>进行秘密 SYN 扫描，对象为主机 Saznme 所在的“C 类”网段 的 255 台主机。同时尝试确定每台工作主机的操作系统类型。因为进行 SYN 扫描 和操作系统检测，这个扫描需要有根权限。</p>
<p><strong>nmap -sV -p 22，53，110，143，4564 198.116.0-255.1-127</strong></p>
<p>进行主机列举和 TCP 扫描，对象为 B 类 188.116 网段中 255 个 8 位子网。这 个测试用于确定系统是否运行了 sshd、DNS、imapd 或 4564 端口。如果这些端口 打开，将使用版本检测来确定哪种应用在运行。</p>
<p><strong>nmap -v -iR 100000 -P0 -p 80</strong></p>
<p>随机选择 100000 台主机扫描是否运行 Web 服务器(80 端口)。由起始阶段 发送探测报文来确定主机是否工作非常浪费时间，而且只需探测主机的一个端口，因 此使用-P0 禁止对主机列表。</p>
<p><strong>nmap -P0 -p80 -oX logs/pb-port80scan.xml -oG logs/pb-port80scan.gnmap 216.163.128.20/20</strong></p>
<p>扫描 4096 个 IP 地址，查找 Web 服务器(不 ping)，将结果以 Grep 和 XML 格式保存。</p>
<p><strong>host -l company.com | cut -d -f 4 | nmap -v -iL -</strong></p>
<p>进行 DNS 区域传输，以发现 company.com 中的主机，然后将 IP 地址提供给 Nmap。上述命令用于 GNU/Linux -- 其它系统进行区域传输时有不同的命令。</p>
                    <div>
                        <hr>

标题：Nmap 使用教程<br>
作者：<a href="https://ZZUGEneral.github.io" target="_blank">General</a><br>
地址：<a href="https://ZZUGEneral.github.io/articles/2020/10/26/1603708218188.html" target="_blank">https://ZZUGEneral.github.io/articles/2020/10/26/1603708218188.html</a><br>
一个没有得到Java开发工作的测试员！
<!-- 签名档内可使用 HTML、JavaScript -->
<br>
                    </div>
            </section>
        </div>

    </div>
        <div class="post__toc">
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#选项概要">选项概要</a>
        </li>
        <li class="toc__h2">
            <a href="#目标发现">目标发现</a>
        </li>
        <li class="toc__h2">
            <a href="#主机发现">主机发现</a>
        </li>
        <li class="toc__h2">
            <a href="#端口扫描基础">端口扫描基础</a>
        </li>
        <li class="toc__h2">
            <a href="#端口扫描技术">端口扫描技术</a>
        </li>
        <li class="toc__h2">
            <a href="#端口说明和扫描顺序">端口说明和扫描顺序</a>
        </li>
        <li class="toc__h2">
            <a href="#服务和版本探测">服务和版本探测</a>
        </li>
        <li class="toc__h2">
            <a href="#操作系统探测">操作系统探测</a>
        </li>
        <li class="toc__h2">
            <a href="#时间和性能">时间和性能</a>
        </li>
        <li class="toc__h2">
            <a href="#防火墙-IDS躲避和哄骗">防火墙/IDS 躲避和哄骗</a>
        </li>
        <li class="toc__h2">
            <a href="#输出">输出</a>
        </li>
        <li class="toc__h2">
            <a href="#其它选项">其它选项</a>
        </li>
        <li class="toc__h2">
            <a href="#实例">实例</a>
        </li>
</ul>        </div>
        <div class="wrapper">
            <div id="gitalk-container"></div>
            <div id="vcomment"
                 style="    margin-bottom: 40px; margin-top: 80px;
        border: 1px solid rgba(255,255,255,0.8);
        border-radius: 5px;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 1px 4px rgba(0,0,0,0.04);
        padding: 20px;"
                 data-name="General" data-postId="1603708218188"></div>
            <div id="b3logsolocomments"></div>
        </div>
    <div class="article__bottom">
        <div class="wrapper">
            <div class="fn__flex">
                <div class="item" id="randomArticles"></div>
                <div class="item" id="relevantArticles"></div>
            </div>
        </div>
    </div>
    
</div>
<script type="text/javascript"
        src="https://ZZUGEneral.github.io/skins/Bubble/js/TweenMax.min.js?1602754508835"
        charset="utf-8"></script>
<footer class="footer">
    <div class="wrapper">
            <a href="https://ld246.com/member/General"
       title="https://ld246.com/member/General"
       class="user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/ZZUGeneral"
           title="https://github.com/ZZUGeneral"
           class="user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

        <a href="https://www.linkedin.com/in/yhlgeneral"
           title="https://www.linkedin.com/in/yhlgeneral"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.32 23.443h4.211v-12.651h-4.211v12.651zM8.805 6.891c-0.018-1.24-0.911-2.188-2.352-2.188s-2.388 0.948-2.388 2.188c0 1.203 0.911 2.187 2.333 2.187h0.018c1.477 0 2.388-0.984 2.388-2.187zM19.469 23.443h4.211v-7.255c0-3.883-2.078-5.688-4.849-5.688-2.26 0-3.263 1.258-3.81 2.133h0.036v-1.841h-4.211s0.055 1.185 0 12.651v0h4.211v-7.073c0-0.365 0.018-0.747 0.128-1.021 0.31-0.747 1.003-1.531 2.169-1.531 1.513 0 2.115 1.148 2.115 2.862v6.763zM28 5.25v17.5c0 2.898-2.352 5.25-5.25 5.25h-17.5c-2.898 0-5.25-2.352-5.25-5.25v-17.5c0-2.898 2.352-5.25 5.25-5.25h17.5c2.898 0 5.25 2.352 5.25 5.25z"></path>
            </svg>
        </a>
        <a href="https://weibo.com/18203879479"
           title="https://weibo.com/18203879479"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
                <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
                <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
                <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
            </svg>
        </a>
        <a href="https://www.zhihu.com/people/general-54-18"
           title="https://www.zhihu.com/people/general-54-18"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M32 26.67c0 2.931-2.382 5.33-5.33 5.33h-21.339c-2.948 0-5.33-2.382-5.33-5.33v-21.339c0-2.948 2.382-5.33 5.33-5.33h21.339c2.948 0 5.33 2.382 5.33 5.33v21.339zM12.358 17.191h4.713c0-1.114-0.531-1.748-0.531-1.748h-4.079c0.103-2.005 0.189-4.576 0.223-5.536h3.874s-0.017-1.645-0.463-1.645h-6.822s0.411-2.142 0.96-3.085c0 0-2.040-0.12-2.742 2.605-0.686 2.725-1.731 4.354-1.851 4.662s0.6 0.137 0.891 0c0.309-0.137 1.663-0.617 2.057-2.537h2.108c0.034 1.2 0.12 4.885 0.086 5.536h-4.336c-0.6 0.446-0.823 1.748-0.823 1.748h4.971c-0.206 1.371-0.566 3.137-1.080 4.062-0.806 1.491-1.234 2.828-4.131 5.176 0 0-0.48 0.36 0.994 0.223 1.474-0.12 2.845-0.514 3.839-2.434 0.514-0.994 1.011-2.28 1.423-3.565l4.079 4.713s0.548-1.268 0.137-2.657l-3.034-3.394-1.028 0.754c0.291-0.994 0.497-1.988 0.548-2.845 0.017 0.017 0.017 0 0.017-0.034zM18.048 7.936v16.3h1.714l0.703 1.954 2.965-1.954h3.754v-16.3h-9.136zM25.401 22.487h-1.937l-2.434 1.611-0.566-1.611h-0.6v-12.735h5.553v12.735h-0.017z"></path>
            </svg>
        </a>
        <a href="tencent://message/?uin=1359541394"
           title="1359541394"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.821 14.393c-0.125-0.304-0.143-0.607-0.143-0.929 0-0.5 0.321-1.304 0.625-1.679-0.018-0.464 0.179-1.411 0.536-1.714 0-3.304 2.554-7.464 5.536-8.893 1.839-0.875 3.768-1.179 5.786-1.179 1.571 0 3.286 0.375 4.75 0.982 4.196 1.768 5.143 5.054 6.036 9.25l0.018 0.089c0.518 0.786 0.982 1.714 0.982 2.679 0 0.482-0.321 0.964-0.321 1.393 0 0.036 0.107 0.179 0.125 0.214 1.536 2.268 2.929 4.732 2.929 7.554 0 0.625-0.339 2.804-1.339 2.804-0.696 0-1.464-1.696-1.714-2.161-0.018-0.018-0.036-0.018-0.054-0.018l-0.089 0.071c-0.571 1.482-1.196 2.875-2.357 3.982 1.018 0.982 2.661 0.893 2.964 2.589-0.089 0.196-0.054 0.411-0.196 0.607-1.018 1.536-3.75 1.732-5.393 1.732-2.179 0-3.946-0.571-6-1.179-0.429-0.125-1.071-0.054-1.536-0.107-1.089 1.196-3.75 1.518-5.286 1.518-1.357 0-6.607-0.089-6.607-2.411 0-1 0.214-1.286 0.911-1.929 0.554-0.107 0.964-0.411 1.607-0.446 0.089 0 0.161-0.018 0.25-0.036 0.018-0.018 0.036-0.018 0.036-0.071l-0.036-0.054c-1.232-0.286-2.964-3.393-3.232-4.679l-0.089-0.054c-0.125 0-0.179 0.268-0.214 0.357-0.393 0.911-1.321 1.893-2.357 2h-0.018c-0.143 0-0.089-0.143-0.196-0.179-0.25-0.589-0.411-1.125-0.411-1.786 0-3.571 1.714-6.214 4.5-8.321z"></path>
            </svg>
        </a>
        <a href="javascript:void(0)"
           class="user__site" title="18203879479">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
            </svg>
        </a>
 <br>
        &copy; 2020
        <a href="https://ZZUGEneral.github.io">General 的个人博客</a>
        你一定会喜欢那个因为喜欢她而发光的自己！
        <span class="footer__heart">❤️</span><br>
        <div align="center">
          <a target="_blank" href="http://beian.miit.gov.cn" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">豫ICP备2020028892号-1</p></a> &nbsp;
          <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41132602001081" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="https://img.hacpai.com/file/2019/07/备案图标-cc568907.png" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">豫公网安备 41132602001081号</p></a>
        </div>
    </div>
</footer>
<svg class="side__top" id="sideTop" version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
    <path d="M26.562 13.958c0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303v0c0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303v0zM23.305 10.7c0 0 0 0 0 0 0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303c0-0 0-0 0-0v0c0-0 0-0 0-0 0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303c0 0 0 0 0 0v0zM20.022 7.417c0 0 0 0 0 0 0 0.72 0.583 1.303 1.303 1.303s1.303-0.583 1.303-1.303c0-0 0-0 0-0v0c0-0 0-0 0-0 0-0.72-0.583-1.303-1.303-1.303s-1.303 0.583-1.303 1.303c0 0 0 0 0 0v0zM29.67 0h-27.339c-0.677 0-1.228 0.551-1.228 1.228s0.551 1.228 1.228 1.228h11.151l-10.725 10.725c-0.476 0.476-0.476 1.253 0 1.729 0.226 0.226 0.551 0.351 0.852 0.351s0.626-0.125 0.852-0.351l10.074-10.074v25.936c0 0.677 0.551 1.228 1.228 1.228s1.228-0.551 1.228-1.228v-26.011c0.476 0.426 1.203 0.426 1.679-0.050s0.476-1.253 0-1.729l-0.576-0.576h11.577c0.677 0 1.228-0.551 1.228-1.228 0-0.626-0.551-1.178-1.228-1.178z"></path>
</svg>
<script>
  var Label = {
    speech: true,
    servePath: "https://ZZUGEneral.github.io",
    staticServePath: "https://ZZUGEneral.github.io",
    luteAvailable: true,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "4.3.1",
    staticSite: true,
    showCodeBlockLn: false,
    articleId: "1603708218188",
  }
</script>
<script type="text/javascript"
        src="https://ZZUGEneral.github.io/skins/Bubble/js/common.min.js?1602754508835"
        charset="utf-8"></script>
<script type="text/javascript"
        src="https://ZZUGEneral.github.io/skins/Bubble/js/circleMagic.min.js?1602754508835"
        charset="utf-8"></script>

    <svg viewBox="0 0 32 32" width="100%" height="100%" class="side__top side__top--toc">
        <path d="M30 18h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM30 6.25h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2h28c1.1 0 2 0.9 2 2s-0.9 2-2 2zM2 25.75h28c1.1 0 2 0.9 2 2s-0.9 2-2 2h-28c-1.1 0-2-0.9-2-2s0.9-2 2-2z"></path>
    </svg>

<script type="text/javascript">
    Util.addScript('https://ZZUGEneral.github.io/js/page.min.js?1602754508835', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论不能为空",
        "oId": "1603708218188",
        "blogHost": "https://ZZUGEneral.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
        page.loadRandomArticles('<h3>随机阅读</h3>');
        page.loadRelevantArticles('1603708218188', '<h3>相关阅读</h3>');
    Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 42ms, 2020/11/10 14:53:25 -->